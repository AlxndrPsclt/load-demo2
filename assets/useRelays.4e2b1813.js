import{_ as $e}from"./InputField.vue_vue_type_script_setup_true_lang.bc5986a6.js";import{d as Ie,l as Fe,aa as we,b4 as le,o as Ne,c as Ue,a as Be,e as Re,by as xe,bA as tt,K as Me}from"./index.fb017ac5.js";const rt={flex:"","justify-center":"","items-center":""},_t=Ie({__name:"PasswordField",props:{fieldDomain:null,modelValue:null},emits:["passwordValidationChanged","passwordSubmission","update:modelValue"],setup(F,{emit:v}){const k=F,E=Fe(""),o=we(()=>E.value.length>7?(console.log("Valid password!"),"OK"):(console.log("Invalid password! Too short."),"NOK"));return le(o,async(s,f)=>{v("passwordValidationChanged",s)}),le(E,async(s,f)=>{console.log("Watching passwords..."),v("update:modelValue",s)}),(s,f)=>{const n=$e;return Ne(),Ue("div",rt,[Be(n,{"m-1":"","field-name":"password","field-domain":k.fieldDomain,"field-type":"password","field-icon":"i-carbon-password","field-status":Re(o),modelValue:E.value,"onUpdate:modelValue":f[0]||(f[0]=w=>E.value=w),value:k.modelValue,onFocusout:f[1]||(f[1]=w=>v("passwordSubmission")),onInputSubmission:f[2]||(f[2]=w=>v("passwordSubmission"))},null,8,["field-domain","field-status","modelValue","value"])])}}}),nt={flex:"","justify-center":"","items-center":""},Et=Ie({__name:"EmailField",props:{fieldDomain:null,modelValue:null},emits:["emailValidationChanged","emailSubmission","update:modelValue"],setup(F,{emit:v}){const k=F,E=Fe(""),o=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,s=we(()=>(console.log("validate email, put it green if ok, red if incorrect"),E.value.match(o)?(console.log("Valid email address!"),"OK"):(console.log("Invalid email address!"),"NOK")));return le(s,async(f,n)=>{v("emailValidationChanged",f)}),le(E,async(f,n)=>{console.log("Watching emails..."),v("update:modelValue",f)}),(f,n)=>{const w=$e;return Ne(),Ue("div",nt,[Be(w,{"m-1":"","field-name":"email","field-domain":k.fieldDomain,"field-type":"text","field-size":80,"field-icon":"i-carbon-email","field-status":Re(s),modelValue:E.value,"onUpdate:modelValue":n[0]||(n[0]=e=>E.value=e),onFocusout:n[1]||(n[1]=e=>v("emailSubmission")),onInputSubmission:n[2]||(n[2]=e=>v("emailSubmission"))},null,8,["field-domain","field-status","modelValue"])])}}}),it={flex:"","justify-center":"","items-center":""},jt=Ie({__name:"NameField",props:{fieldDomain:null,modelValue:null},emits:["nameValidationChanged","nameSubmission","update:modelValue"],setup(F,{emit:v}){const k=F,E=Fe(""),o=we(()=>(console.log(E.length),E.value.length>4?(console.log("Valid name!"),"OK"):(console.log("Invalid name! Too short."),"NOK")));return le(o,async(s,f)=>{console.log("Watching..."),console.log(f),console.log(s),v("nameValidationChanged",s)}),le(E,async(s,f)=>{console.log("Watching names..."),v("update:modelValue",s)}),(s,f)=>{const n=$e;return Ne(),Ue("div",it,[Be(n,{"m-1":"","field-name":"name","field-domain":k.fieldDomain,"field-type":"text","field-icon":"i-carbon-user","field-status":Re(o),modelValue:E.value,"onUpdate:modelValue":f[0]||(f[0]=w=>E.value=w),onFocusout:f[1]||(f[1]=w=>v("nameSubmission")),onInputSubmission:f[2]||(f[2]=w=>v("nameSubmission"))},null,8,["field-domain","field-status","modelValue"])])}}});function Je(F){throw new Error('Could not dynamically require "'+F+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var _e={exports:{}},We;function pe(){return We||(We=1,function(F){(function(){function v(E,o){return o?Je(E):E.slice?v[s(E)]:function(f,n){E(f={exports:{}}),v[s(n)]=f.exports};function s(f){return f.split("/").slice(-1).toString().replace(".js","")}}var k=F;v(function(E){String.random=function(s,f){var n="";for(s=s||24,f=f||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";s-- >0;)n+=f.charAt(Math.floor(Math.random()*f.length));return n},String.match=function(s,f){var n,w;return typeof s!="string"?!1:(typeof f=="string"&&(f={"=":f}),f=f||{},n=f["="]||f["*"]||f[">"]||f["<"],s===n?!0:w!==f["="]?!1:(n=f["*"]||f[">"],s.slice(0,(n||"").length)===n?!0:w!==f["*"]?!1:w!==f[">"]&&w!==f["<"]?s>=f[">"]&&s<=f["<"]:w!==f[">"]&&s>=f[">"]||w!==f["<"]&&s<=f["<"]))},String.hash=function(s,f){if(typeof s=="string"){if(f=f||0,!s.length)return f;for(var n=0,w=s.length,e;n<w;++n)e=s.charCodeAt(n),f=(f<<5)-f+e,f|=0;return f}};var o=Object.prototype.hasOwnProperty;Object.plain=function(s){return s?s instanceof Object&&s.constructor===Object||Object.prototype.toString.call(s).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(s,f){for(var n in s)if(o.call(s,n)&&(!f||f.indexOf(n)==-1))return!1;return!0},Object.keys=Object.keys||function(s){var f=[];for(var n in s)o.call(s,n)&&f.push(n);return f},function(){var s,f=setTimeout,n=0,w=0,e=typeof setImmediate!=""+s&&setImmediate||function(u,c){return typeof MessageChannel==""+s?f:((u=new MessageChannel).port1.onmessage=function(D){D.data==""&&c()},function(D){c=D,u.port2.postMessage("")})}(),l=f.check=f.check||typeof performance!=""+s&&performance||{now:function(){return+new Date}};f.hold=f.hold||9,f.poll=f.poll||function(u){if(f.hold>=l.now()-n&&w++<3333){u();return}e(function(){n=l.now(),u()},w=0)}}(),function(){var s=setTimeout,f=s.turn=s.turn||function(c){n.push(c)==1&&w(u)},n=f.s=[],w=s.poll,e=0,l,u=function(){(l=n[e++])&&l(),(e==n.length||e==99)&&(n=f.s=n.slice(e),e=0),n.length&&w(u)}}(),function(){var s,f=setTimeout,n=f.turn;(f.each=f.each||function(w,e,l,u){u=u||9,function c(D,g,m){if(g=(D=(w||[]).splice(0,u)).length){for(var h=0;h<g&&s===(m=e(D[h]));h++);if(s===m){n(c);return}}l&&l(m)}()})()}()})(v,"./shim"),v(function(E){E.exports=function o(l,f,n){if(!l)return{to:o};var w,e=typeof f=="function",l=(this.tag||(this.tag={}))[l]||e&&(this.tag[l]={tag:l,to:o._={next:function(c){var D;(D=this.to)&&D.next(c)}}});if(e){var u={off:o.off||(o.off=function(){if(this.next===o._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=o._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:o._,next:f,the:l,on:this,as:n};return(u.back=l.last||l).to=u,l.last=u}return(l=l.to)&&w!==f&&l.next(f),l}})(v,"./onto"),v(function(E){E.exports=function(o){return o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"&&o!=1/0&&o!=-1/0&&o===o||!!o&&typeof o["#"]=="string"&&Object.keys(o).length===1&&o["#"]}})(v,"./valid"),v(function(E){v("./shim");function o(){var l=+new Date;return w<l?(f=0,w=l+o.drift):w=l+(f+=1)/n+o.drift}o.drift=0;var s=-1/0,f=0,n=999,w=s,e;o.is=function(l,u,c){var D=u&&l&&l._&&l._[">"]||c;if(!!D)return typeof(D=D[u])=="number"?D:s},o.ify=function(l,u,c,D,g){(l=l||{})._=l._||{},g&&(l._["#"]=g);var m=l._[">"]||(l._[">"]={});return e!==u&&u!=="_"&&(typeof c=="number"&&(m[u]=c),e!==D&&(l[u]=D)),l},E.exports=o})(v,"./state"),v(function(E){v("./shim");function o(s){var f={s:{}},n=f.s;s=s||{max:999,age:1e3*9},f.check=function(e){return n[e]?w(e):!1};var w=f.track=function(e){var l=n[e]||(n[e]={});return l.was=f.now=+new Date,f.to||(f.to=setTimeout(f.drop,s.age+9)),l};return f.drop=function(e){f.to=null,f.now=+new Date;var l=Object.keys(n);console.STAT&&console.STAT(f.now,+new Date-f.now,"dup drop keys"),setTimeout.each(l,function(u){var c=n[u];c&&(e||s.age)>f.now-c.was||delete n[u]},0,99)},f}E.exports=o})(v,"./dup"),v(function(E){v("./onto"),E.exports=function(f,n){if(!!this.on){var w=(this.opt||{}).lack||9e3;if(typeof f!="function"){if(!f)return;var l=f["#"]||f,e=(this.tag||"")[l];return e?(n&&(e=this.on(l,n),clearTimeout(e.err),e.err=setTimeout(function(){e.off()},w)),!0):void 0}var l=n&&n["#"]||o(9);if(!f)return l;var u=this.on(l,f,n);return u.err=u.err||setTimeout(function(){u.off(),u.next({err:"Error: No ACK yet.",lack:!0})},w),l}};var o=String.random||function(){return Math.random().toString(36).slice(2)}})(v,"./ask"),v(function(E){function o(g){return g instanceof o?(this._={$:this}).$:this instanceof o?o.create(this._={$:this,opt:g}):new o(g)}o.is=function(g){return g instanceof o||g&&g._&&g===g._.$||!1},o.version=.202,o.chain=o.prototype,o.chain.toJSON=function(){},v("./shim"),o.valid=v("./valid"),o.state=v("./state"),o.on=v("./onto"),o.dup=v("./dup"),o.ask=v("./ask"),function(){o.create=function(y){y.root=y.root||y,y.graph=y.graph||{},y.on=y.on||o.on,y.ask=y.ask||o.ask,y.dup=y.dup||o.dup();var j=y.$.opt(y.opt);return y.once||(y.on("in",g,y),y.on("out",g,y),y.on("put",x,y),o.on("create",y),y.on("create",y)),y.once=1,j};function g(y){if(!!y){if(y.out===g){this.to.next(y);return}var j=this,$=j.as,M=$.at||$,R=M.$,B=M.dup,P,K=y.DBG;if((P=y["#"])||(P=y["#"]=f(9)),!B.check(P)){if(B.track(P),P=y._,y._=typeof P=="function"?P:function(){},y.$&&y.$===(y.$._||"").$||(y.$=R),y["@"]&&!y.put&&r(y),!M.ask(y["@"],y))if(K&&(K.u=+new Date),y.put){m(y);return}else y.get&&o.on.get(y,R);K&&(K.uc=+new Date),j.to.next(y),K&&(K.ua=+new Date),!(y.nts||y.NTS)&&(y.out=g,M.on("out",y),K&&(K.ue=+new Date))}}}function m(y){if(!!y){var j=y._||"",$=j.root=((j.$=y.$||"")._||"").root;if(y["@"]&&j.faith&&!j.miss){y.out=g,$.on("out",y);return}j.latch=$.hatch,j.match=$.hatch=[];var M=y.put,R=j.DBG=y.DBG,B=+new Date;if(U=U||B,!(M["#"]&&M["."])){R&&(R.p=B),j["#"]=y["#"],j.msg=y,j.all=0,j.stun=1;var P=Object.keys(M);console.STAT&&console.STAT(B,((R||j).pk=+new Date)-B,"put sort");var K=0,V,W,G,q,Z,ee,se;(function ne(de){if(V!=K){if(V=K,!(G=P[K])){console.STAT&&console.STAT(B,((R||j).pd=+new Date)-B,"put"),a(j);return}(q=M[G])?(se=q._)?G!==se["#"]?ee=p+_(G)+"soul not same.":(Z=se[">"])||(ee=p+_(G)+"no state."):ee=p+_(G)+"no meta.":ee=p+_(G)+"no node.",W=Object.keys(q||{})}if(ee){y.err=j.err=ee,a(j);return}var be=0,ie;for(de=de||0;de++<9&&(ie=W[be++]);)if(ie!=="_"){var ue=q[ie],te=Z[ie];if(u===te){ee=p+_(ie)+"on"+_(G)+"no state.";break}if(!w(ue)){ee=p+_(ie)+"on"+_(G)+"bad "+typeof ue+_(ue);break}h(ue,ie,G,te,y),++N}if((W=W.slice(be)).length){n(ne);return}++K,W=null,ne(de)})()}}}o.on.put=m;function h(y,j,$,M,R){var B=R._||"",P=B.root,K=P.graph,V,W=K[$]||c,G=e(W,j,1),q=W[j],Z=B.DBG;(V=console.STAT)&&(!K[$]||!q)&&(V.has=(V.has||0)+1);var ee=C();if(M>ee){setTimeout(function(){h(y,j,$,M,R)},(V=M-ee)>b?b:V),console.STAT&&console.STAT((Z||B).Hf=+new Date,V,"future");return}if(!(M<G)&&!(!B.faith&&M===G&&(y===q||T(y)<=T(q))&&!B.miss)){B.stun++;var se=R["#"]+B.all++,ne={toString:function(){return se},_:B};ne.toJSON=ne.toString,P.dup.track(ne)["#"]=R["#"],Z&&(Z.ph=Z.ph||+new Date),P.on("put",{"#":ne,"@":R["@"],put:{"#":$,".":j,":":y,">":M},ok:R.ok,_:B})}}function x(y){var j;(j=(y._||"").DBG)&&(j.pa=+new Date,j.pm=j.pm||+new Date);var $=this,M=$.as,R=M.graph,B=y._,P=y.put,K=P["#"],V=P["."],W=P[":"],G=P[">"];y["#"];var q;(q=B.msg)&&(q=q.put)&&(q=q[K])&&l(q,V,G,W,K),R[K]=l(R[K],V,G,W,K),(q=(M.next||"")[K])&&q.on("in",y),a(B),$.to.next(y)}function a(y,j){var $;if(!y.stop&&!(!y.err&&0<--y.stun)&&(y.stop=1,!!($=y.root))){var M=y.match;M.end=1,M===$.hatch&&(!(M=y.latch)||M.end?delete $.hatch:$.hatch=M),y.hatch&&y.hatch(),setTimeout.each(y.match,function(R){R&&R()}),!(!(j=y.msg)||y.err||j.err)&&(j.out=g,y.root.on("out",j),A())}}function r(y){var j=y["@"]||"",$;if(!($=j._)){var M=(M=y.$)&&(M=M._)&&(M=M.root)&&(M=M.dup);if(!(M=M.check(j)))return;y["@"]=M["#"]||y["@"];return}$.acks=($.acks||0)+1,($.err=y.err)&&(y["@"]=$["#"],a($)),$.ok=y.ok||$.ok,!$.stop&&!$.crack&&($.crack=$.match&&$.match.push(function(){d($)})),d($)}function d(y){!y||!y.root||y.stun||y.acks!==y.all||y.root.on("in",{"@":y["#"],err:y.err,ok:y.err?u:y.ok||{"":1}})}var p="Error: Invalid graph!",_=function(y){return" '"+(""+y).slice(0,9)+"...' "},T=JSON.stringify,b=2147483647,C=o.state,N=0,U,A=function(){N>999&&N/-(U-(U=+new Date))>1&&(o.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),A=function(){N=0})}}(),function(){o.on.get=function(m,h){var x=h._,a=m.get,r=a["#"],d=x.graph[r],p=a["."],_=x.next||(x.next={});_[r];var T=m._||{},b=T.DBG=m.DBG;if(b&&(b.g=+new Date),!d)return x.on("get",m);if(p){if(typeof p!="string"||u===d[p])return x.on("get",m);d=l({},p,e(d,p),d[p],r)}d&&g(m,d),x.on("get",m)};function g(m,h){var x=+new Date,a=m._||{},r=a.DBG=m.DBG,d=m["#"],p=f(9),_=Object.keys(h||"").sort(),T=((h||"")._||"")["#"];_.length;var b=m.$._.root,C=h===b.graph[T];console.STAT&&console.STAT(x,((r||a).gk=+new Date)-x,"got keys"),h&&function N(){x=+new Date;for(var U=0,A,y={},j;U<9&&(A=_[U++]);)l(y,A,e(h,A),h[A],T);_=_.slice(U),(j={})[T]=y,y=j;var $;C&&($=function(){},$.ram=$.faith=!0),j=_.length,console.STAT&&console.STAT(x,-(x-(x=+new Date)),"got copied some"),r&&(r.ga=+new Date),b.on("in",{"@":d,"#":p,put:y,"%":j?p=f(9):u,$:b.$,_:$,DBG:r}),console.STAT&&console.STAT(x,+new Date-x,"got in"),j&&setTimeout.turn(N)}(),h||b.on("in",{"@":m["#"]})}o.on.get.ack=g}(),function(){o.chain.opt=function(g){g=g||{};var m=this,h=m._,x=g.peers||g;return Object.plain(g)||(g={}),Object.plain(h.opt)||(h.opt=g),typeof x=="string"&&(x=[x]),Object.plain(h.opt.peers)||(h.opt.peers={}),x instanceof Array&&(g.peers={},x.forEach(function(a){var r={};r.id=r.url=a,g.peers[a]=h.opt.peers[a]=h.opt.peers[a]||r})),s(g,function a(r){var d=this[r];if(this&&this.hasOwnProperty(r)||typeof d=="string"||Object.empty(d)){this[r]=d;return}d&&d.constructor!==Object&&!(d instanceof Array)||s(d,a)}),h.opt.from=g,o.on("opt",h),h.opt.uuid=h.opt.uuid||function(r){return o.state().toString(36).replace(".","")+String.random(r||12)},m}}();var s=function(g,m){Object.keys(g).forEach(m,g)},f=String.random,n=setTimeout.turn,w=o.valid,e=o.state.is,l=o.state.ify,u,c={},D;o.log=function(){return!o.log.off&&D.log.apply(D,arguments),[].slice.call(arguments).join(" ")},o.log.once=function(g,m,h){return(h=o.log.once)[g]=h[g]||0,h[g]++||o.log(m)},typeof window<"u"&&((window.GUN=window.Gun=o).window=window);try{typeof k<"u"&&(k.exports=o)}catch{}E.exports=o,(o.window||{}).console=(o.window||{}).console||{log:function(){}},(D=console).only=function(g,m){return D.only.i&&g===D.only.i&&D.only.i++&&(D.log.apply(D,arguments)||m)},o.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(v,"./root"),v(function(E){var o=v("./root");o.chain.back=function(n,w){var e;if(n=n||1,n===-1||n===1/0)return this._.root.$;if(n===1)return(this._.back||this._).$;var l=this,u=l._;if(typeof n=="string"&&(n=n.split(".")),n instanceof Array){var c=0,D=n.length,e=u;for(c;c<D;c++)e=(e||s)[n[c]];return f!==e?w?l:e:(e=u.back)?e.$.back(n,w):void 0}if(typeof n=="function"){for(var g,e={back:u};(e=e.back)&&f===(g=n(e,w)););return g}return typeof n=="number"?(u.back||u).$.back(n-1):this};var s={},f})(v,"./back"),v(function(E){var o=v("./root");o.chain.chain=function(a){var r=this,d=r._,p=new(a||r).constructor(r),_=p._,T;return _.root=T=d.root,_.id=++T.once,_.back=r._,_.on=o.on,_.on("in",o.on.in,_),_.on("out",o.on.out,_),p};function s(a){var r,d=this.as,p=d.back,_=d.root,T;if(a.$||(a.$=d.$),this.to.next(a),d.err){d.on("in",{put:d.put=u,$:d.$});return}if(r=a.get){if(_.pass&&(_.pass[d.id]=d),d.lex&&Object.keys(d.lex).forEach(function(b){T[b]=d.lex[b]},T=a.get=a.get||{}),r["#"]||d.soul){if(r["#"]=r["#"]||d.soul,a["#"]||(a["#"]=c(9)),p=_.$.get(r["#"])._,r=r["."]){if(g(p.put,r)&&(T=p.ask&&p.ask[r],(p.ask||(p.ask={}))[r]=p.$.get(r)._,p.on("in",{get:r,put:{"#":p.soul,".":r,":":p.put[r],">":h(_.graph[p.soul],r)}}),T))return}else{if(T=p.ask&&p.ask[""],(p.ask||(p.ask={}))[""]=p,u!==p.put&&(p.on("in",p),T))return;a.$=p.$}return _.ask(e,a),_.on("in",a)}if(r["."])return d.get?(a={get:{".":d.get},$:d.$},(p.ask||(p.ask={}))[d.get]=a.$._,p.on("out",a)):(a={get:d.lex?a.get:{},$:d.$},p.on("out",a));if((d.ask||(d.ask={}))[""]=d,d.get)return r["."]=d.get,(p.ask||(p.ask={}))[d.get]=a.$._,p.on("out",a)}return p.on("out",a)}o.on.out=s;function f(a,r){r=r||this.as;var d=r.root,p=a.$||(a.$=r.$),_=(p||"")._||l,T=a.put||"",b=T["#"],C=T["."],N=u!==T["="]?T["="]:T[":"],U=T[">"]||-1/0,A;if(u!==a.put&&(u===T["#"]||u===T["."]||u===T[":"]&&u===T["="]||u===T[">"])){if(!D(T)){if(!(b=((T||"")._||"")["#"])){console.log("chain not yet supported for",T,"...",a,r);return}return p=r.root.$.get(b),setTimeout.each(Object.keys(T).sort(),function(y){y=="_"||u===(U=h(T,y))||r.on("in",{$:p,put:{"#":b,".":y,"=":T[y],">":U},VIA:a})})}r.on("in",{$:_.back.$,put:{"#":b=_.back.soul,".":C=_.has||_.get,"=":T,">":h(_.back.put,C)},via:a});return}(a.seen||"")[r.id]||((a.seen||(a.seen=function(){}))[r.id]=r,r!==_&&(Object.keys(a).forEach(function(y){T[y]=a[y]},T={}),T.get=r.get||T.get,!r.soul&&!r.has?T.$$$=T.$$$||r.$:_.soul&&(T.$=r.$,T.$$=T.$$||_.$),a=T),w(a,r),(r.soul||a.$$)&&U>=h(d.graph[b],C)&&((T=d.$.get(b)._).put=x(T.put,C,U,N,b)),!_.soul&&U>=h(d.graph[b],C)&&(A=(d.$.get(b)._.next||"")[C])&&(A.put=N,typeof(T=D(N))=="string"&&(A.put=d.$.get(T)._.put||N)),this.to&&this.to.next(a),r.any&&setTimeout.each(Object.keys(r.any),function(y){(y=r.any[y])&&y(a)},0,99),r.echo&&setTimeout.each(Object.keys(r.echo),function(y){(y=r.echo[y])&&y.on("in",a)},0,99),((a.$$||"")._||_).soul&&(A=r.next)&&(A=A[C])&&(T={},Object.keys(a).forEach(function(y){T[y]=a[y]}),T.$=(a.$$||a.$).get(T.get=C),delete T.$$,delete T.$$$,A.on("in",T)),n(a,r))}o.on.in=f;function n(a,r){if(r=r||this.as||a.$._,!(a.$$&&this!==o.on)&&!(!a.put||r.soul)){var d=a.put||"",p=d["="]||d[":"],C,_=r.root,T=_.$.get(d["#"]).get(d["."])._;if(typeof(p=D(p))!="string"){this===o.on&&((T.echo||(T.echo={}))[r.id]=r);return}if(!((T.echo||(T.echo={}))[r.id]&&!(_.pass||"")[r.id])){if(C=_.pass){if(C[p+r.id])return;C[p+r.id]=1}(T.echo||(T.echo={}))[r.id]=r,r.has&&(r.link=p);var b=_.$.get(T.link=p)._;(b.echo||(b.echo={}))[T.id]=T;var C=r.ask||"";(C[""]||r.lex)&&b.on("out",{get:{"#":p}}),setTimeout.each(Object.keys(C),function(N,U){!N||!(U=C[N])||U.on("out",{get:{"#":p,".":N}})},0,99)}}}o.on.link=n;function w(a,r){var d=a.put||"",p=u!==d["="]?d["="]:d[":"],_=r.root,T,b;if(u===p){if(r.soul&&u!==r.put||(b=(a.$$||a.$||"")._||"",a["@"]&&(u!==b.put||u!==r.put)))return;(T=r.link||a.linked)&&delete(_.$.get(T)._.echo||"")[r.id],r.has&&(r.link=null),r.put=u,setTimeout.each(Object.keys(r.next||""),function(C,N){!(N=r.next[C])||(T&&delete(_.$.get(T).get(C)._.echo||"")[N.id],N.on("in",{get:C,put:u,$:N.$}))},0,99);return}r.soul||a.$$||(T=D(p),b=a.$._||"",!((T===b.link||r.has&&!b.link)&&!((_.pass||"")[r.id]&&typeof T!="string"))&&(delete(b.echo||"")[r.id],w({get:r.get,put:u,$:a.$,linked:a.linked=a.linked||b.link},r)))}o.on.unlink=w;function e(a,r){var d=this.as,p=d.$._;p.root;var _=d.get||"",T=(a.put||"")[_["#"]]||"";if(!a.put||typeof _["."]=="string"&&u===T[_["."]]){if(u!==p.put||!p.soul&&!p.has)return;p.ack=(p.ack||0)+1,p.on("in",{get:p.get,put:p.put=u,$:p.$,"@":a["@"]});return}(a._||{}).miss=1,o.on.put(a)}var l={},u,c=String.random,D=o.valid,g=function(a,r){return a&&Object.prototype.hasOwnProperty.call(a,r)},m=o.state,h=m.is,x=m.ify})(v,"./chain"),v(function(E){var o=v("./root");o.chain.get=function(u,c,D){var g,m;if(typeof u=="string"){if(u.length==0)return(g=this.chain())._.err={err:o.log("0 length key!",u)},c&&c.call(g,g._.err),g;var h=this,x=h._,a=x.next||w;(g=a[u])||(g=u&&s(u,h)),g=g&&g.$}else if(typeof u=="function"){let b=function(C,N,U){if(!b.stun&&!((R=d.pass)&&!R[p])){var A=C.$._,y=(C.$$||"")._,j=(y||A).put,$=!A.has&&!A.soul,M={},R;if(($||l===j)&&(j=l===((R=C.put)||"")["="]?l===(R||"")[":"]?R:R[":"]:R["="]),typeof(R=o.valid(j))=="string"&&(j=l===(R=d.$.get(R)._.put)?r.not?l:j:R),!(r.not&&l===j)){if(l===r.stun){if((R=d.stun)&&R.on&&(x.$.back(function(B){if(R.on(""+B.id,M={}),(M.run||0)<b.id)return M}),!M.run&&R.on(""+A.id,M={}),!M.run&&y&&R.on(""+y.id,M={}),b.id>M.run&&((!M.stun||M.stun.end)&&(M.stun=R.on("stun"),M.stun=M.stun&&M.stun.last),M.stun&&!M.stun.end))){(M.stun.add||(M.stun.add={}))[p]=function(){b(C,N,1)};return}if(l===j&&(U=0),(R=d.hatch)&&!R.end&&l===r.hatch&&!U){if(_[A.$._.id])return;_[A.$._.id]=1,R.push(function(){b(C,N,1)});return}_={}}if(d.pass){if(d.pass[p+A.id])return;d.pass[p+A.id]=1}if(r.on){r.ok.call(A.$,j,A.get,C,N||b);return}if(r.v2020){r.ok(C,N||b);return}Object.keys(C).forEach(function(B){R[B]=C[B]},R={}),C=R,C.put=j,r.ok.call(r.as,C,N||b)}}};if(c===!0)return f(this,u,c,D),this;g=this;var x=g._,r=c||{},d=x.root,p;r.at=x,r.ok=u;var _={};return b.at=x,(x.any||(x.any={}))[p=String.random(7)]=b,b.off=function(){b.stun=1,x.any&&delete x.any[p]},b.rid=n,b.id=r.run||++d.once,m=d.pass,(d.pass={})[p]=1,r.out=r.out||{get:{}},x.on("out",r.out),d.pass=m,g}else{if(typeof u=="number")return this.get(""+u,c,D);if(typeof(m=e(u))=="string")return this.get(m,c,D);(m=this.get.next)&&(g=m(this,u))}return g?(c&&typeof c=="function"&&g.get(c,D),g):((g=this.chain())._.err={err:o.log("Invalid get request!",u)},c&&c.call(g,g._.err),g)};function s(u,c){var D=c._,g=D.next,m=c.chain(),h=m._;return g||(g=D.next={}),g[h.get=u]=h,c===D.root.$?h.soul=u:(D.soul||D.has)&&(h.has=u),h}function f(u,c,D,g){var m=u._,h=0,x;return(x=m.soul||m.link)?c(x,g,m):m.jam?m.jam.push([c,g]):(m.jam=[[c,g]],u.get(function(r,d){if(!(l===r.put&&!m.root.opt.super&&(x=Object.keys(m.root.opt.peers).length)&&++h<=x)){d.rid(r);var p=(p=r.$)&&p._||{},_=0,T;for(x=m.jam,delete m.jam;T=x[_++];){var b=T[0];T=T[1],b&&b(p.link||p.soul||o.valid(r.put)||((r.put||{})._||{})["#"],T,r,d)}}},{out:{get:{".":!0}}}),u)}function n(u){var c=this.at||this.on;if(!u||c.soul||c.has)return this.off();if(!!(u=(u=(u=u.$||u)._||u).id)){c.map;var D;if((D=this.seen||(this.seen={}))[u])return!0;D[u]=!0}}var w={},e=o.valid,l})(v,"./get"),v(function(E){var o=v("./root");o.chain.put=function(g,m,h){var x=this,a=x._,r=a.root;h=h||{},h.root=a.root,h.run||(h.run=r.once),s(h,a.id),h.ack=h.ack||m,h.via=h.via||x,h.data=h.data||g,h.soul||(h.soul=a.soul||typeof m=="string"&&m);var d=h.state=h.state||o.state();return typeof g=="function"?(g(function(p){h.data=p,x.put(e,e,h)}),x):h.soul?(h.$=r.$.get(h.soul),h.todo=[{it:h.data,ref:h.$}],h.turn=h.turn||u,h.ran=h.ran||f,function p(){var _=h.todo,T=_.pop(),b=T.it;T.ref&&T.ref._.id;var C,N,U,A,y;if(s(h,T.ref),(A=T.todo)&&(N=A.pop(),b=b[N],A.length&&_.push(T)),N&&(_.path||(_.path=[])).push(N),!(C=c(b))&&!(y=o.is(b))){if(!Object.plain(b)){f.err(h,"Invalid data: "+w(b)+" at "+(h.via.back(function(R){R.get&&A.push(R.get)},A=[])||A.join("."))+"."+(_.path||[]).join("."));return}for(var j=h.seen||(h.seen=[]),$=j.length;$--;)if(b===(A=j[$]).it){C=b=A.link;break}}if(N&&C)T.node=D(T.node,N,d,b);else{let R=function(B,P){var K=U.link["#"];P&&(P.off(),P.rid(B));var V=K||B.soul||(A=(B.$$||B.$)._||"").soul||A.link||((A=A.put||"")._||"")["#"]||A["#"]||((A=B.put||"")&&B.$$?A["#"]:(A["="]||A[":"]||"")["#"]);if(!K&&s(h,B.$),!V&&!T.link["#"]){(T.wait||(T.wait=[])).push(function(){R(B,P)});return}V||(V=[],(B.$$||B.$).back(function(W){if(A=W.soul||W.link)return V.push(A);V.push(W.get)}),V=V.reverse().join("/")),U.link["#"]=V,!y&&(((h.graph||(h.graph={}))[V]=U.node||(U.node={_:{}}))._["#"]=V),delete h.wait[M],U.wait&&setTimeout.each(U.wait,function(W){W&&W()}),h.ran(h)};if(!h.seen){f.err(h,"Data at root of graph must be a node (an object).");return}h.seen.push(U={it:b,link:{},todo:y?[]:Object.keys(b).sort().reverse(),path:(_.path||[]).slice(),up:T}),T.node=D(T.node,N,d,U.link),!y&&U.todo.length&&_.push(U);var M=h.seen.length;(h.wait||(h.wait={}))[M]="",A=(U.ref=y?b:N?T.ref.get(N):T.ref)._,(A=b&&(b._||"")["#"]||A.soul||A.link)?R({soul:A}):U.ref.get(R,{run:h.run,v2020:1,out:{get:{".":" "}}})}if(!_.length)return h.ran(h);h.turn(p)}(),x):(n(h),x)};function s(g,m){if(!!m){m=(m._||"").id||m;var h=g.root.stun||(g.root.stun={on:o.on}),x={},a;g.stun||(g.stun=h.on("stun",function(){})),(a=h.on(""+m))&&a.the.last.next(x),!(x.run>=g.run)&&h.on(""+m,function(r){if(g.stun.end){this.off(),this.to.next(r);return}r.run=r.run||g.run,r.stun=r.stun||g.stun})}}function f(g){if(g.err){f.end(g.stun,g.root);return}if(!(g.todo.length||g.end||!Object.empty(g.wait))){g.end=1;var m=g.$.back(-1)._,h=m.root,x=m.ask(function(p){h.on("ack",p),p.err&&!p.lack&&o.log(p),++a>(g.acks||0)&&this.off(),g.ack&&g.ack(p,this)},g.opt),a=0,r=g.stun,d;(d=function(){!r||(f.end(r,h),setTimeout.each(Object.keys(r=r.add||""),function(p){(p=r[p])&&p()}))}).hatch=d,g.ack&&!g.ok&&(g.ok=g.acks||9),g.via._.on("out",{put:g.out=g.graph,ok:g.ok&&{"@":g.ok+1},opt:g.opt,"#":x,_:d})}}f.end=function(g,m){g.end=l,g.the.to===g&&g===g.the.last&&delete m.stun,g.off()},f.err=function(g,m){(g.ack||l).call(g,g.out={err:g.err=o.log(m)}),g.ran(g)};function n(g){var m=g.via._,h;g.via=g.via.back(function(x){if(x.soul||!x.get)return x.$;h=g.data,(g.data={})[x.get]=h}),(!g.via||!g.via._.soul)&&(g.via=m.root.$.get(((g.data||"")._||"")["#"]||m.$.back("opt.uuid")())),g.via.put(g.data,g.ack,g)}function w(g,m){return g&&(m=g.constructor)&&m.name||typeof g}var e,l=function(){},u=setTimeout.turn,c=o.valid,D=o.state.ify})(v,"./put"),v(function(E){var o=v("./root");v("./chain"),v("./back"),v("./put"),v("./get"),E.exports=o})(v,"./index"),v(function(E){var o=v("./index");o.chain.on=function(n,w,e,l){var u=this,c=u._;c.root;var D;if(typeof n=="string")return w?(D=c.on(n,w,e||c,l),e&&e.$&&(e.subs||(e.subs=[])).push(D),u):c.on(n);var g=w;return(g=g===!0?{change:!0}:g||{}).not=1,g.on=1,u.get(n,g),u},o.chain.once=function(n,w){if(w=w||{},!n)return s(this);var e=this,l=e._,u=l.root;l.put;var c=String.random(7),D;return e.get(function(g,m,h,x){var a=this,r=a._,d=r.one||(r.one={});if(x.stun||d[c]==="")return;if((D=o.valid(g))===!0){p();return}if(typeof D=="string")return;clearTimeout((l.one||"")[c]),clearTimeout(d[c]),d[c]=setTimeout(p,w.wait||99);function p(_){if(!r.has&&!r.soul&&(r={put:g,get:m}),f===(D=r.put)&&(D=((h.$$||"")._||"").put),typeof o.valid(D)=="string"&&(D=u.$.get(D)._.put,D===f&&!_)){d[c]=setTimeout(function(){p(1)},w.wait||99);return}x.stun||d[c]!==""&&(d[c]="",(l.soul||l.has)&&x.off(),n.call(a,D,r.get),clearTimeout(d[c]))}},{on:1}),e};function s(n,w,e){return o.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(e=n.chain())._.nix=n.once(function(l,u){e._.on("in",this._)}),e._.lex=n._.lex,e}o.chain.off=function(){var n=this,w=n._,e,l=w.back;if(!!l)return w.ack=0,(e=l.next)&&e[w.get]&&delete e[w.get],(e=l.ask)&&delete e[w.get],(e=l.put)&&delete e[w.get],(e=w.soul)&&delete l.root.graph[e],(e=w.map)&&Object.keys(e).forEach(function(u,c){c=e[u],c.link&&l.root.$.get(c.link).off()}),(e=w.next)&&Object.keys(e).forEach(function(u,c){c=e[u],c.$.off()}),w.on("off",{}),n};var f})(v,"./on"),v(function(E){var o=v("./index"),s=o.chain.get.next;o.chain.get.next=function(e,l){var u;return Object.plain(l)?(u=((u=l["#"])||"")["="]||u)?e.get(u):((u=e.chain()._).lex=l,e.on("in",function(c){String.match(c.get||(c.put||"")["."],l["."]||l["#"]||l)&&u.on("in",c),this.to.next(c)}),u.$):(s||n)(e,l)},o.chain.map=function(e,l,u){var c=this,D=c._,g,m;return Object.plain(e)&&(g=e["."]?e:{".":e},e=w),e?(o.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),m=c.chain(),c.map().on(function(h,x,a,r){var d=(e||n).call(this,h,x,a,r);if(w!==d){if(h===d)return m._.on("in",a);if(o.is(d))return m._.on("in",d._);var p={};Object.keys(a.put).forEach(function(_){p[_]=a.put[_]},p),p["="]=d,m._.on("in",{get:x,put:p})}}),m):((m=D.each)||((D.each=m=c.chain())._.lex=g||m._.lex||D.lex,m._.nix=c.back("nix"),c.on("in",f,m._)),m)};function f(e){this.to.next(e);var l=this.as,u=e.$,c=u._,D=e.put,g;!c.soul&&!e.$$||(g=l.lex)&&!String.match(e.get||(D||"")["."],g["."]||g["#"]||g)||o.on.link(e,l)}var n=function(){},w})(v,"./map"),v(function(E){var o=v("./index");o.chain.set=function(s,f,n){var w=this,e=w.back(-1),l,u;return f=f||function(){},n=n||{},n.item=n.item||s,(l=((s||"")._||"")["#"])&&((s={})["#"]=l),typeof(u=o.valid(s))=="string"?w.get(l=u).put(s,f,n):o.is(s)?(w.put(function(c){s.get(function(D,g,m){if(!D)return f.call(w,{err:o.log('Only a node can be linked! Not "'+m.put+'"!')});(u={})[D]={"#":D},c(u)},!0)}),s):(Object.plain(s)&&(s=e.get(l=w.back("opt.uuid")()).put(s)),w.get(l||e.back("opt.uuid")(7)).put(s,f,n))}})(v,"./set"),v(function(E){v("./shim");var o=function(){},s=JSON.parseAsync||function(e,l,u){var c,D=+new Date;try{l(c,JSON.parse(e,u),f.sucks(+new Date-D))}catch(g){l(g)}},f=JSON.stringifyAsync||function(e,l,u,c){var D,g=+new Date;try{l(D,JSON.stringify(e,u,c),f.sucks(+new Date-g))}catch(m){l(m)}};f.sucks=function(e){e>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),f.sucks=o)};function n(e){var l=function(){},u=e.opt||{};u.log=u.log||console.log,u.gap=u.gap||u.wait||0,u.max=u.max||(u.memory?u.memory*999*999:3e8)*.3,u.pack=u.pack||u.max*.01*.01,u.puff=u.puff||9;var c=setTimeout.turn||setTimeout,D=e.dup,g=D.check,m=D.track,h=l.hear=function(r,d){if(!!r){if(u.max<=r.length)return l.say({dam:"!",err:"Message too big!"},d);l===this&&(h.d+=r.length||0,++h.c);var p=d.SH=+new Date,_=r[0],T;if(_==="["){s(r,function(b,C){if(b||!C)return l.say({dam:"!",err:"DAM JSON parse error."},d);console.STAT&&console.STAT(+new Date,C.length,"# on hear batch");var N=u.puff;(function U(){for(var A=+new Date,y=0,j;y<N&&(j=C[y++]);)l.hear(j,d);C=C.slice(y),console.STAT&&console.STAT(A,+new Date-A,"hear loop"),x(d),C.length&&c(U,0)})()}),r="";return}if(_==="{"||(r["#"]||Object.plain(r))&&(T=r)){if(T)return h.one(T,d,p);s(r,function(b,C){if(b||!C)return l.say({dam:"!",err:"DAM JSON parse error."},d);h.one(C,d,p)});return}}};h.one=function(r,d,U){var _,T,b,C,N;if(r.DBG&&(r.DBG=N={DBG:r.DBG}),N&&(N.h=U),N&&(N.hp=+new Date),(_=r["#"])||(_=r["#"]=String.random(9)),!(b=g(_))&&(T=r["##"],!(T&&(b=r["@"]||r.get&&_)&&D.check(C=b+T)))){if((r._=function(){}).via=l.leap=d,(b=r["><"])&&typeof b=="string"&&b.slice(0,99).split(",").forEach(function(A){this[A]=1},r._.yo={}),b=r.dam){(b=l.hear[b])&&b(r,d,e),m(_);return}(b=r.ok)&&(r._.near=b["/"]);var U=+new Date;N&&(N.is=U),d.SI=_,e.on("in",l.last=r),N&&(N.hd=+new Date),console.STAT&&console.STAT(U,+new Date-U,r.get?"msg get":r.put?"msg put":"msg"),(b=m(_)).via=d,r.get&&(b.it=r),C&&m(C),l.leap=l.last=null}},h.c=h.d=0,function(){var r=0,d;l.hash=function(T,b){var C,N,U,A=+new Date;f(T.put,function y(j,$){var M=(N||(N=U=$||"")).slice(0,32768);if(C=String.hash(M,C),N=N.slice(32768),N){c(y,0);return}console.STAT&&console.STAT(A,+new Date-A,"say json+hash"),T._.$put=U,T["##"]=C,l.say(T,b),delete T._.$put},p)};function p(T,b){var C;return b instanceof Object?(Object.keys(b).sort().forEach(_,{to:C={},on:b}),C):b}function _(T){this.to[T]=this.on[T]}l.say=function(T,b){var C;if((C=this)&&(C=C.to)&&C.next&&C.next(T),!T)return!1;var N,U,A=T["@"],y=T._||(T._=function(){}),j=T.DBG,$=+new Date;if(y.y=y.y||$,b||j&&(j.y=$),(N=T["#"])||(N=T["#"]=String.random(9)),!d&&m(N),!T["##"]&&w!==T.put&&!y.via&&A){l.hash(T,b);return}if(!b&&A&&(b=(C=D.s[A])&&(C.via||(C=C.it)&&(C=C._)&&C.via)||(C=l.last)&&A===C["#"]&&l.leap),!b&&A)return D.s[A]?void 0:(console.STAT&&console.STAT(+new Date,++r,"total no peer to ack to"),!1);if(!b&&l.way)return l.way(T);if(j&&(j.yh=+new Date),!(U=y.raw)){l.raw(T,b);return}if(j&&(j.yr=+new Date),!b||!b.id){if(!Object.plain(b||u.peers))return!1;var $=+new Date;u.puff;var M=u.peers,R=Object.keys(b||u.peers||{});console.STAT&&console.STAT($,+new Date-$,"peer keys"),function K(){var V=+new Date;d=1;var W=y.raw;y.raw=U;for(var G=0,q;G<9&&(q=(R||"")[G++]);)!(q=M[q]||(b||"")[q])||l.say(T,q);y.raw=W,d=0,R=R.slice(G),console.STAT&&console.STAT(V,+new Date-V,"say loop"),R.length&&(c(K,0),A&&m(A))}();return}if(!b.wire&&l.wire&&l.wire(b),N!==b.last){if(b.last=N,b===y.via||(C=y.yo)&&(C[b.url]||C[b.pid]||C[b.id]))return!1;if(console.STAT&&console.STAT($,((j||y).yp=+new Date)-(y.y||$),"say prep"),!d&&A&&m(A),b.batch){if(b.tail=(C=b.tail||0)+U.length,b.tail<=u.pack){b.batch+=(C?",":"")+U;return}x(b)}b.batch="[";var B=+new Date;setTimeout(function(){console.STAT&&console.STAT(B,+new Date-B,"0ms TO"),x(b)},u.gap),a(U,b),console.STAT&&A===b.SI&&console.STAT($,+new Date-b.SH,"say ack")}},l.say.c=l.say.d=0,l.raw=function(T,b){if(!T)return"";var C=T._||{},N,U;if(U=C.raw)return U;if(typeof T=="string")return T;var A=T["##"],y=T["@"];if(A&&y){if(!C.via&&g(y+A))return!1;if((U=(D.s[y]||"").it)||(U=l.last)&&y===U["#"]){if(A===U["##"])return!1;U["##"]||(U["##"]=A)}}if(!T.dam&&!T["@"]){var j=0,$=[];U=u.peers;for(var M in U){var R=U[M];if($.push(R.url||R.pid||R.id),++j>6)break}j>1&&(T["><"]=$.join())}if(T.put&&(U=T.ok)&&(T.ok={"@":(U["@"]||1)-1,"/":U["/"]==T._.near?l.near:U["/"]}),N=C.$put){U={},Object.keys(T).forEach(function(P){U[P]=T[P]}),U.put=":])([:",f(U,function(P,K){if(!P){var V=+new Date;U=K.indexOf('"put":":])([:"'),B(w,K=K.slice(0,U+6)+N+K.slice(U+14)),console.STAT&&console.STAT(V,+new Date-V,"say slice")}});return}f(T,B);function B(P,K){P||(C.raw=K,l.say(T,b))}}}();function x(r){var d=r.batch,p=typeof d=="string";if(p&&(d+="]"),r.batch=r.tail=null,!!d&&!(p?3>d.length:!d.length)){if(!p)try{d=d.length===1?d[0]:JSON.stringify(d)}catch(_){return u.log("DAM JSON stringify error",_)}!d||a(d,r)}}function a(r,d){try{var p=d.wire;d.say?d.say(r):p.send&&p.send(r),l.say.d+=r.length||0,++l.say.c}catch{(d.queue=d.queue||[]).push(r)}}return l.near=0,l.hi=function(r){var d=r.wire,p;if(!d){l.wire(r.length&&{url:r,id:r}||r);return}r.id?u.peers[r.url||r.id]=r:(p=r.id=r.id||r.url||String.random(9),l.say({dam:"?",pid:e.opt.pid},u.peers[p]=r),delete D.s[r.last]),r.met||(l.near++,r.met=+new Date,e.on("hi",r)),p=r.queue,r.queue=[],setTimeout.each(p||[],function(_){a(_,r)},0,9)},l.bye=function(r){r.met&&--l.near,delete r.met,e.on("bye",r);var d=+new Date;d=d-(r.met||d),l.bye.time=((l.bye.time||d)+d)/2},l.hear["!"]=function(r,d){u.log("Error:",r.err)},l.hear["?"]=function(r,d){r.pid&&(d.pid||(d.pid=r.pid),r["@"])||(l.say({dam:"?",pid:u.pid,"@":r["#"]},d),delete D.s[d.last])},l.hear.mob=function(r,d){if(!!r.peers){var p=Object.keys(r.peers),_=p[Math.random()*p.length>>0];!_||(l.bye(d),l.hi(_))}},e.on("create",function(r){r.opt.pid=r.opt.pid||String.random(9),this.to.next(r),r.on("out",l.say)}),e.on("bye",function(r,d){r=u.peers[r.id||r]||r,this.to.next(r),r.bye?r.bye():(d=r.wire)&&d.close&&d.close(),delete u.peers[r.id],r.wire=null}),e.on("bye",function(r,d){this.to.next(r),(d=console.STAT)&&(d.peers=l.near),(d=r.url)&&setTimeout(function(){},u.lack||9e3)}),e.on("hi",function(r,d){if(this.to.next(r),(d=console.STAT)&&(d.peers=l.near),!u.super){var p=Object.keys(e.next||"");p.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(p,function(_){var T=e.next[_];if(u.super||(T.ask||"")[""]){l.say({get:{"#":_}},r);return}setTimeout.each(Object.keys(T.ask||""),function(b){!b||l.say({"##":String.hash((e.graph[_]||"")[b]),get:{"#":_,".":b}},r)})})}}),l}var w;try{E.exports=n}catch{}})(v,"./mesh"),v(function(E){var o=v("./index");o.Mesh=v("./mesh"),o.on("opt",function(f){if(this.to.next(f),f.once)return;var n=f.opt;if(n.WebSocket===!1)return;var w=o.window||{},e=n.WebSocket||w.WebSocket||w.webkitWebSocket||w.mozWebSocket;if(!e)return;n.WebSocket=e;var l=n.mesh=n.mesh||o.Mesh(f);l.wire||n.wire,l.wire=n.wire=u;function u(m){try{if(!m||!m.url)return x&&x(m);var h=m.url.replace(/^http/,"ws"),x=m.wire=new n.WebSocket(h);return x.onclose=function(){D(m),n.mesh.bye(m)},x.onerror=function(a){D(m)},x.onopen=function(){n.mesh.hi(m)},x.onmessage=function(a){!a||n.mesh.hear(a.data||a,m)},x}catch{n.mesh.bye(m)}}setTimeout(function(){!n.super&&f.on("out",{dam:"hi"})},1);var c=2*999;function D(m){clearTimeout(m.defer),n.peers[m.url]&&(g&&m.retry<=0||(m.retry=(m.retry||n.retry+1||60)-(-m.tried+(m.tried=+new Date)<c*4?1:0),m.defer=setTimeout(function h(){if(g&&g.hidden)return setTimeout(h,c);u(m)},c)))}var g=""+s!=typeof document&&document});var s})(v,"./websocket"),v(function(E){if(!(typeof Gun>"u")){var o=function(){},s;try{s=(Gun.window||o).localStorage}catch{}s||(Gun.log("Warning: No localStorage exists to persist data to!"),s={setItem:function(n,w){this[n]=w},removeItem:function(n){delete this[n]},getItem:function(n){return this[n]}});var f=JSON.stringifyAsync||function(n,w,e,l){var u;try{w(u,JSON.stringify(n,e,l))}catch(c){w(c)}};Gun.on("create",function n(w){this.to.next(w);var e=w.opt;w.graph;var l=[],u,c,D,g;if(e.localStorage===!1)return;e.prefix=e.file||"gun/";try{u=n[e.prefix]=n[e.prefix]||JSON.parse(D=s.getItem(e.prefix))||{}}catch{u=n[e.prefix]={}}D=(D||"").length,w.on("get",function(h){this.to.next(h);var x=h.get,a,r,d,p;!x||!(a=x["#"])||(r=u[a]||p,r&&(d=x["."])&&!Object.plain(d)&&(r=Gun.state.ify({},d,Gun.state.is(r,d),r[d],a)),Gun.on.get.ack(h,r))}),w.on("put",function(h){this.to.next(h);var x=h.put,a=x["#"],r=x["."],d=h["#"],p=h.ok||"";if(u[a]=Gun.state.ify(u[a],r,x[">"],x[":"],a),g&&D>4999880){w.on("in",{"@":d,err:"localStorage max!"});return}!h["@"]&&(!h._.via||Math.random()<p["@"]/p["/"])&&l.push(d),!c&&(c=setTimeout(m,9+D/333))});function m(){if(!l.length&&((setTimeout.turn||"").s||"").length){setTimeout(m,99);return}var h=l;clearTimeout(c),c=!1,l=[],f(u,function(x,a){try{!x&&s.setItem(e.prefix,a)}catch(r){x=g=r||"localStorage failure"}x&&(Gun.log(x+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),w.on("localStorage:error",{err:x,get:e.prefix,put:u})),D=a.length,setTimeout.each(h,function(r){w.on("in",{"@":r,err:x,ok:0})},0,99)})}})}})(v,"./localStorage")})(),function(){var U;if(""+U!=typeof Gun){var v=function(A){console.warn("Warning! Deprecated internal utility will break in next version:",A)},k=Gun;k.fn=k.fn||{is:function(A){return v("fn"),!!A&&typeof A=="function"}},k.bi=k.bi||{is:function(A){return v("bi"),A instanceof Boolean||typeof A=="boolean"}},k.num=k.num||{is:function(A){return v("num"),!E(A)&&(A-parseFloat(A)+1>=0||A===1/0||A===-1/0)}},k.text=k.text||{is:function(A){return v("text"),typeof A=="string"}},k.text.ify=k.text.ify||function(A){return v("text.ify"),k.text.is(A)?A:typeof JSON<"u"?JSON.stringify(A):A&&A.toString?A.toString():A},k.text.random=k.text.random||function(A,y){v("text.random");var j="";for(A=A||24,y=y||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";A>0;)j+=y.charAt(Math.floor(Math.random()*y.length)),A--;return j},k.text.match=k.text.match||function(A,y){var j,$;return v("text.match"),typeof A!="string"?!1:(typeof y=="string"&&(y={"=":y}),y=y||{},j=y["="]||y["*"]||y[">"]||y["<"],A===j?!0:$!==y["="]?!1:(j=y["*"]||y[">"]||y["<"],A.slice(0,(j||"").length)===j?!0:$!==y["*"]?!1:$!==y[">"]&&$!==y["<"]?A>=y[">"]&&A<=y["<"]:$!==y[">"]&&A>=y[">"]||$!==y["<"]&&A<=y["<"]))},k.text.hash=k.text.hash||function(A,y){if(v("text.hash"),typeof A=="string"){if(y=y||0,!A.length)return y;for(var j=0,$=A.length,M;j<$;++j)M=A.charCodeAt(j),y=(y<<5)-y+M,y|=0;return y}},k.list=k.list||{is:function(A){return v("list"),A instanceof Array}},k.list.slit=k.list.slit||Array.prototype.slice,k.list.sort=k.list.sort||function(A){return v("list.sort"),function(y,j){return!y||!j?0:(y=y[A],j=j[A],y<j?-1:y>j?1:0)}},k.list.map=k.list.map||function(A,y,j){return v("list.map"),C(A,y,j)},k.list.index=1,k.obj=k.boj||{is:function(A){return v("obj"),A?A instanceof Object&&A.constructor===Object||Object.prototype.toString.call(A).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},k.obj.put=k.obj.put||function(A,y,j){return v("obj.put"),(A||{})[y]=j,A},k.obj.has=k.obj.has||function(A,y){return v("obj.has"),A&&Object.prototype.hasOwnProperty.call(A,y)},k.obj.del=k.obj.del||function(A,y){if(v("obj.del"),!!A)return A[y]=null,delete A[y],A},k.obj.as=k.obj.as||function(A,y,j,$){return v("obj.as"),A[y]=A[y]||($===j?{}:j)},k.obj.ify=k.obj.ify||function(A){if(v("obj.ify"),d(A))return A;try{A=JSON.parse(A)}catch{A={}}return A},function(){var A;function y(j,$){_(this,$)&&A!==this[$]||(this[$]=j)}k.obj.to=k.obj.to||function(j,$){return v("obj.to"),$=$||{},C(j,y,$),$}}(),k.obj.copy=k.obj.copy||function(A){return v("obj.copy"),A&&JSON.parse(JSON.stringify(A))},function(){function A(y,j){var $=this.n,M;if(!($&&(j===$||d($)&&_($,j)))&&M!==j)return!0}k.obj.empty=k.obj.empty||function(y,j){return v("obj.empty"),y?!C(y,A,{n:j}):!0}}(),function(){function A($,M){if(arguments.length===2){A.r=A.r||{},A.r[$]=M;return}A.r=A.r||[],A.r.push($)}var y=Object.keys,j;Object.keys=Object.keys||function($){return j($,function(M,R,B){B(R)})},k.obj.map=j=k.obj.map||function($,M,R){v("obj.map");var B,P=0,K,V,W,G,q=typeof M=="function";if(A.r=B,y&&d($)&&(W=y($),G=!0),R=R||{},E($)||W)for(K=(W||$).length;P<K;P++){var Z=P+k.list.index;if(q){if(V=G?M.call(R,$[W[P]],W[P],A):M.call(R,$[P],Z,A),V!==B)return V}else if(M===$[G?W[P]:P])return W?W[P]:Z}else for(P in $)if(q){if(_($,P)&&(V=R?M.call(R,$[P],P,A):M($[P],P,A),V!==B))return V}else if(M===$[P])return P;return q?A.r:k.list.index?0:-1}}(),k.time=k.time||{},k.time.is=k.time.is||function(A){return v("time"),A?A instanceof Date:+new Date().getTime()};var a=k.fn.is,E=k.list.is,r=k.obj,d=r.is,_=r.has,C=r.map,o={};o.is=function(A){return v("val.is"),A===U?!1:A===null?!0:A===1/0?!1:n(A)||f(A)||g(A)?!0:o.link.is(A)||!1},o.link=o.rel={_:"#"},function(){o.link.is=function(y){if(v("val.link.is"),y&&y[s]&&!y._&&d(y)){var j={};if(C(y,A,j),j.id)return j.id}return!1};function A(y,j){var $=this;if($.id)return $.id=!1;if(j==s&&n(y))$.id=y;else return $.id=!1}}(),o.link.ify=function(A){return v("val.link.ify"),b({},s,A)},k.obj.has._=".";var s=o.link._,U,f=k.bi.is,g=k.num.is,n=k.text.is,r=k.obj,d=r.is,b=r.put,C=r.map;k.val=k.val||o;var w={_:"_"};w.soul=function(A,y){return v("node.soul"),A&&A._&&A._[y||u]},w.soul.ify=function(A,y){return v("node.soul.ify"),y=typeof y=="string"?{soul:y}:y||{},A=A||{},A._=A._||{},A._[u]=y.soul||A._[u]||l(),A},w.soul._=o.link._,function(){w.is=function(y,j,$){v("node.is");var M;return d(y)&&(M=w.soul(y))?!C(y,A,{as:$,cb:j,s:M,n:y}):!1};function A(y,j){if(j!==w._){if(!o.is(y))return!0;this.cb&&this.cb.call(this.as,y,j,this.n,this.s)}}}(),function(){w.ify=function(y,j,$){return v("node.ify"),j?typeof j=="string"?j={soul:j}:typeof j=="function"&&(j={map:j}):j={},j.map&&(j.node=j.map.call($,y,U,j.node||{})),(j.node=w.soul.ify(j.node||{},j))&&C(y,A,{o:j,as:$}),j.node};function A(y,j){var $=this.o,M,R;if($.map){M=$.map.call(this.as,y,""+j,$.node),R===M?p($.node,j):$.node&&($.node[j]=M);return}o.is(y)&&($.node[j]=y)}}();var r=k.obj,d=r.is,p=r.del,C=r.map,e=k.text,l=e.random,u=w.soul._,U;k.node=k.node||w;var c=k.state;c.lex=function(){return v("state.lex"),c().toString(36).replace(".","")},c.to=function(A,y,j){v("state.to");var $=(A||{})[y];return d($)&&($=N($)),c.ify(j,y,c.is(A,y),$,w.soul(A))},function(){c.map=function(y,j,$){v("state.map");var M,R=d(R=y||j)?R:null;return y=a(y=y||j)?y:null,R&&!y?(j=g(j)?j:c(),R[h]=R[h]||{},C(R,A,{o:R,s:j}),R):($=$||d(j)?j:M,j=g(j)?j:c(),function(B,P,K,V){if(!y)return A.call({o:K,s:j},B,P),B;y.call($||this||{},B,P,K,V),!(_(K,P)&&M===K[P])&&A.call({o:K,s:j},B,P)})};function A(y,j){h!==j&&c.ify(this.o,j,this.s)}}();var r=k.obj;r.as;var _=r.has,d=r.is,C=r.map,N=r.copy,D=k.num,g=D.is,m=k.fn,a=m.is,h=w._,U,x={};(function(){x.is=function(j,$,M,R){return v("graph.is"),!j||!d(j)||T(j)?!1:!C(j,A,{cb:$,fn:M,as:R})};function A(j,$){if(!j||$!==w.soul(j)||!w.is(j,this.fn,this.as))return!0;!this.cb||(y.n=j,y.as=this.as,this.cb.call(y.as,j,$,y))}function y(j){j&&w.is(y.n,j,y.as)}})(),function(){x.ify=function(R,B,P){v("graph.ify");var K={path:[],obj:R};return B?typeof B=="string"?B={soul:B}:typeof B=="function"&&(B.map=B):B={},typeof P=="string"&&(B.soul=B.soul||P,P=U),B.soul&&(K.link=o.link.ify(B.soul)),B.shell=(P||{}).shell,B.graph=B.graph||{},B.seen=B.seen||[],B.as=B.as||P,A(B,K),B.root=K.node,B.graph};function A(R,B){var P;return(P=M(R,B))?P:(B.env=R,B.soul=j,w.ify(B.obj,y,B)&&(B.link=B.link||o.link.ify(w.soul(B.node)),B.obj!==R.shell&&(R.graph[o.link.is(B.link)]=B.node)),B)}function y(R,B,P){var K=this,V=K.env,W,G;if(w._===B&&_(R,o.link._))return P._;if(!!(W=$(R,B,P,K,V))){if(B||(K.node=K.node||P||{},_(R,w._)&&w.soul(R)&&(K.node._=N(R._)),K.node=w.soul.ify(K.node,o.link.is(K.link)),K.link=K.link||o.link.ify(w.soul(K.node))),(G=V.map)&&(G.call(V.as||{},R,B,P,K),_(P,B))){if(R=P[B],U===R){p(P,B);return}if(!(W=$(R,B,P,K,V)))return}if(!B)return K.node;if(W===!0)return R;if(G=A(V,{obj:R,path:K.path.concat(B)}),!!G.node)return G.link}}function j(R){var B=this,P=o.link.is(B.link),K=B.env.graph;B.link=B.link||o.link.ify(R),B.link[o.link._]=R,B.node&&B.node[w._]&&(B.node[w._][o.link._]=R),_(K,P)&&(K[R]=K[P],p(K,P))}function $(R,B,P,K,V){var W;if(o.is(R))return!0;if(d(R))return 1;if(W=V.invalid)return R=W.call(V.as||{},R,B,P),$(R,B,P,K,V);V.err="Invalid value at '"+K.path.concat(B).join(".")+"'!",k.list.is(R)&&(V.err+=" Use `.set(item)` instead of an Array.")}function M(R,B){for(var P=R.seen,K=P.length,V;K--;)if(V=P[K],B.obj===V.obj)return V;P.push(B)}}(),x.node=function(A){v("graph.node");var y=w.soul(A);if(!!y)return b({},y,A)},function(){x.to=function(y,j,$){if(v("graph.to"),!!y){var M={};return $=$||{seen:{}},C(y[j],A,{obj:M,graph:y,opt:$}),M}};function A(y,j){var $,M;if(w._===j){if(T(y,o.link._))return;this.obj[j]=N(y);return}if(!($=o.link.is(y))){this.obj[j]=y;return}if(M=this.opt.seen[$]){this.obj[j]=M;return}this.obj[j]=this.opt.seen[$]=x.to(this.graph,$,this.opt)}}();var a=k.fn.is,r=k.obj,d=r.is,p=r.del,_=r.has,T=r.empty,b=r.put,C=r.map,N=r.copy,U;k.graph=k.graph||x}}()}(_e)),_e.exports}var ce=pe(),ze=typeof window<"u"?window.Gun:pe();ze.chain.promise=function(k){var v=this,k=k||function(E){return E};return new Promise(function(E,o){v.once(function(s,f){E({put:s,get:f,gun:this})})}).then(k)};ze.chain.then=function(F){var v=this,k=new Promise((E,o)=>{v.once(function(s,f){E(s,f)})});return F?k.then(F):k};var Pe={exports:{}};(function(){function F(){var s=function(f,n,w){if(s.unit=0,!w&&E!==n&&(s.last=""+f<s.last?s.last:""+f,delete(s.$||{})[o]),w=w||s.$||(s.$={}),!f&&Object.keys(w).length)return w;f=""+f;for(var e=0,l=f.length-1,u=f[e],c,D;!(c=w[u])&&e<l;)u+=f[++e];if(c)if(e==l){if(E===n)return E===(D=c[""])?c:(s.unit=1)&&D;c[""]=n}else return E!==n&&delete c[o],s(f.slice(++e),n,c||(c={}));else{if(!v(w,function(g,m){var h=0,x="";if((m||"").length)for(;m[h]==f[h];)x+=m[h++];if(x){if(E===n)return h<=l?void 0:((D||(D={}))[m.slice(h)]=g,g);var a={};if(a[m.slice(h)]=g,h=f.slice(h),h===""?a[""]=n:(a[h]={})[""]=n,w[x]=a,F.debug&&""+x=="undefined"){console.log(0,x);debugger}return delete w[m],!0}})){if(E===n)return;if((w[u]||(w[u]={}))[""]=n,F.debug&&""+u=="undefined"){console.log(1,u);debugger}}if(E===n)return D}};return s}if(F.map=function s(f,n,w,e){e=e||[];var l=typeof f=="function"?f.$||{}:f;//!opt && console.log("WHAT IS T?", JSON.stringify(t).length);
if(!!l){if(typeof l=="string"){if(F.debug)throw["BUG:",f,n,w,e];return}var u=(l[o]||k).sort||(l[o]=function b(){return b.sort=Object.keys(l).sort(),b}()).sort,c;w=w===!0?{branch:!0}:w||{},(c=w.reverse)&&(u=u.slice(0).reverse());for(var D=w.start,g=w.end,m="\uFFFF",h=0,x=u.length;h<x;h++){var a=u[h],r=l[a],d,p,_;if(!(!r||a===""||o===a||a==="undefined")&&(p=e.slice(0),p.push(a),_=p.join(""),!(E!==D&&_<(D||"").slice(0,_.length))&&!(E!==g&&(g||m)<_))){if(c&&(d=s(r,n,w,p),E!==d))return d;if(E!==(d=r[""])){var T=1;if(E!==D&&_<(D||"")&&(T=0),E!==g&&_>(g||m)&&(T=0),T&&(d=n(d,_,a,e),E!==d))return d}else if(w.branch&&(d=n(E,_,a,e),E!==d))return d;if(e=p,!c&&(d=s(r,n,w,e),E!==d))return d;e.pop()}}}},typeof window<"u")window.Radix=F;else try{Pe.exports=F}catch{}var v=F.object=function(s,f,n){for(var w in s)if(!!s.hasOwnProperty(w)&&(n=f(s[w],w))!==E)return n},k={},E,o=String.fromCharCode(24)})();var Qe={exports:{}},Ee={exports:{}},Ge;function ot(){return Ge||(Ge=1,function(F){(function(){var v={},k,E=setTimeout.turn||typeof setImmediate!=""+k&&setImmediate||setTimeout;v.parseAsync=function(s,f,n,w){if(typeof s!="string"){try{f(k,JSON.parse(s))}catch(u){f(u)}return}var e={i:0,text:s,done:f,l:s.length,up:[]};w=w||1024*32,l();function l(){for(var u=e.text,c=e.i,D=e.l,g=0,m=e.w,h,x;g++<w;){var a=u[c++];if(c>D){e.end=!0;break}if(m){for(c=u.indexOf('"',c-1),a=u[c],x=0;u[c-++x]=="\\";);x=!(x%2),h=h||x,a=='"'&&!x&&(m=k,x=e.s,e.a?(x=u.slice(e.sl,c),(h||1+x.indexOf("\\"))&&(x=JSON.parse('"'+x+'"')),e.at instanceof Array?e.at.push(e.s=x):(e.at||(e.end=g=w,x=k),(e.at||{})[e.s]=e.s=x),e.s=k):(e.s=u.slice(e.sl,c),(h||1+e.s.indexOf("\\"))&&(e.s=JSON.parse('"'+e.s+'"'))),e.a=h=k),++c}else switch(a){case'"':e.sl=c,m=!0;break;case":":e.ai=c,e.a=!0;break;case",":(e.a||e.at instanceof Array)&&(x=u.slice(e.ai,c-1))&&k!==(x=o(x))&&(e.at instanceof Array?e.at.push(x):e.at[e.s]=x),e.a=k,e.at instanceof Array&&(e.a=!0,e.ai=c);break;case"{":e.up.push(e.at||(e.at={})),e.at instanceof Array?e.at.push(e.at={}):k!==(x=e.s)&&(e.at[x]=e.at={}),e.a=k;break;case"}":e.a&&(x=u.slice(e.ai,c-1))&&k!==(x=o(x))&&(e.at instanceof Array?e.at.push(x):(e.at||(e.end=g=w,x=k),(e.at||{})[e.s]=x)),e.a=k,e.at=e.up.pop();break;case"[":k!==(x=e.s)?(e.up.push(e.at),e.at[x]=e.at=[]):e.at||e.up.push(e.at=[]),e.a=!0,e.ai=c;break;case"]":e.a&&(x=u.slice(e.ai,c-1))&&k!==(x=o(x))&&(e.at instanceof Array?e.at.push(x):e.at[e.s]=x),e.a=k,e.at=e.up.pop();break}}if(e.s=k,e.i=c,e.w=m,e.end){if(x=e.at,k===x)try{x=JSON.parse(s)}catch(r){return e.done(r)}e.done(k,x)}else E(l)}};function o(s){var f=parseFloat(s);if(!isNaN(f))return f;if(s=s.trim(),s=="true")return!0;if(s=="false")return!1;if(s=="null")return null}v.stringifyAsync=function(s,f,n,w,e){e=e||{},e.text=e.text||"",e.up=[e.at={d:s}],e.done=f,e.i=0;var l=0;u();function u(){var c=e.at,D=c.d,g="",m;switch(c.i&&c.i-c.j>0&&(g+=","),k!==(m=c.k)&&(g+=JSON.stringify(m)+":"),typeof D){case"boolean":g+=""+D;break;case"string":g+=JSON.stringify(D);break;case"number":g+=isNaN(D)?"null":D;break;case"object":if(!D){g+="null";break}if(D instanceof Array){g+="[",c={i:-1,as:D,up:c,j:0},c.l=D.length,e.up.push(e.at=c);break}if(typeof(D||"").toJSON!="function"){g+="{",c={i:-1,ok:Object.keys(D).sort(),as:D,up:c,j:0},c.l=c.ok.length,e.up.push(e.at=c);break}if(m=D.toJSON()){g+=m;break}case"function":if(c.as instanceof Array){g+="null";break}default:g="",c.j++}for(e.text+=g;1+c.i>=c.l;)e.text+=c.ok?"}":"]",c=e.at=c.up;if(++c.i<c.l){if((m=c.ok)?c.d=c.as[c.k=m[c.i]]:c.d=c.as[c.i],++l<9)return u();l=0,E(u);return}e.done(k,e.text)}},typeof window!=""+k&&(window.YSON=v);try{""+k!="object"&&(F.exports=v)}catch{}typeof JSON!=""+k&&(JSON.parseAsync=v.parseAsync,JSON.stringifyAsync=v.stringifyAsync)})()}(Ee)),Ee.exports}var je,He;function ut(){return He||(He=1,je=function(F){var v=Pe.exports;F.find("a",function(){var k=[];v.map(F.list,function(s,f){!(f.indexOf("%1B")+1)||!s||k.push([f,s])}),k.length&&console.log(`
! ! ! WARNING ! ! !
RAD v0.2020.x has detected OLD v0.2019.x data & automatically migrating. Automatic migration will be turned OFF in future versions! If you are just developing/testing, we recommend you reset your data. Please contact us if you have any concerns.
This message should only log once.`);var E,o;k.forEach(function(s){E=s[0],o=s[1],F.list(decodeURIComponent(E),o),F.list(E,0)}),E&&F.find.bad(E)})}),je}(function(){function F(E){E=E||{},E.log=E.log||console.log,E.file=String(E.file||"radata");var o=(F.has||(F.has={}))[E.file];if(o)return o;E.max=E.max||(E.memory?E.memory*999*999:3e8)*.3,E.until=E.until||E.wait||250,E.batch=E.batch||10*1e3,E.chunk=E.chunk||1024*1024*1,E.code=E.code||{},E.code.from=E.code.from||"!",E.jsonify=!0;function s(h){return encodeURIComponent(h).replace(/\*/g,"%2A")}function f(h){return m!==h&&(!h||typeof h!="object")}var n=""+m==typeof setImmediate?setTimeout:setImmediate,w=setTimeout.turn||n,m,e=k.object,l=0;if(!E.store)return E.log("ERROR: Radisk needs `opt.store` interface with `{get: fn, put: fn (, list: fn)}`!");if(!E.store.put)return E.log("ERROR: Radisk needs `store.put` interface with `(file, data, cb)`!");if(!E.store.get)return E.log("ERROR: Radisk needs `store.get` interface with `(file, cb)`!");E.store.list,""+m!=typeof Je&&ot();var u=JSON.parseAsync||function(h,x,a){var r;try{x(r,JSON.parse(h,a))}catch(d){x(d)}},c=function(h,x,a,r,d){if(typeof x=="function"){var p=a||{};a=x,c.read(h,a,p,d||r);return}c.save(h,x,a,r,d)};c.save=function(h,x,a,r,d){var p={key:h},_,T;p.find=function(b){var C;if(p.file=b||(b=E.code.from),d&&(d=d[b]=d[b]||{}),d&&(d.sf=d.sf||+new Date),C=c.disk[b]){p.mix(m,C);return}c.parse(b,p.mix,m,d)},p.mix=function(b,C){if(d&&(d.sml=+new Date),d&&(d.sm=d.sm||+new Date),p.err=b||p.err){a(b);return}var N=p.file=(C||"").file||p.file,U;if(!C&&N!==E.code.from){c.find.bad(N),c.save(h,x,a,r);return}if((C=c.disk[N]||(c.disk[N]=C||k())).file||(C.file=N),E.compare&&(x=E.compare(C(h),x,h,N),m===x)){a(b,-1);return}if((p.disk=C)(h,x),r&&((U=(U=C.tags||(C.tags={}))[r]||(U[r]=c.tags[r]||(c.tags[r]={})))[N]||(U[N]=c.one[r]||(c.one[r]=a)),a=null),d&&(d.st=d.st||+new Date),C.Q){a&&C.Q.push(a);return}C.Q=a?[a]:[],C.to=setTimeout(p.write,E.until)},p.write=function(){d&&(d.sto=d.sto||+new Date);var b=_=p.file,C=p.disk;T=p.q=C.Q,p.tags=C.tags,delete C.Q,delete c.disk[b],delete C.tags,c.write(b,C,p.ack,m,d)},p.ack=function(b,C){d&&(d.sa=d.sa||+new Date),d&&(d.sal=T.length);var N,U;for(var A in c.tags)if(!!c.tags.hasOwnProperty(A)){var y=c.tags[A];if(!((U=c.disk[_])&&(U=U.tags)&&U[y])){N=y[_],delete y[_];var j;for(var $ in y)if(y.hasOwnProperty($)){j=!0;break}j||(delete c.tags[y],N&&N(b,C))}}!T&&(T="");for(var M=T.length,R=0,B=+new Date;R<M;R++)(N=T[R])&&N(b,C);console.STAT&&console.STAT(B,+new Date-B,"rad acks",s(p.file)),console.STAT&&console.STAT(B,T.length,"rad acks #",s(p.file))},a||(a=function(b,C){}),c.find(h,p.find)},c.disk={},c.one={},c.tags={};var D=0;c.write=function(h,x,a,r,d){if(!x){a("No radix!");return}r=typeof r=="object"?r:{force:r};var p=function(){},_,T;if(p.text="",p.file=h=x.file||(x.file=h),!h){a("What file?");return}if(p.write=function(){var b=x.raw=p.text;c.disk[h=x.file||p.file||h]=x;var C=+new Date;d&&(d.wd=C),c.find.add(h,function(U){if(d&&(d.wa=+new Date),U){a(U);return}E.store.put(s(h),b,function(y,j){d&&(d.wp=+new Date),console.STAT&&console.STAT(C,l=+new Date-C,"wrote disk",JSON.stringify(h),++D,"total all writes."),a(y,j||1),x.Q||delete c.disk[h]})})},p.split=function(){var b=+new Date;d&&(d.wf=b),p.text="",p.count||(p.count=0,k.map(x,function(){p.count++})),d&&(d.wfc=p.count),p.limit=Math.ceil(p.count/2);var C=p.count;return p.count=0,d&&(d.wf1=+new Date),p.sub=k(),k.map(x,p.slice,{reverse:1}),d&&(d.wf2=+new Date),c.write(p.end,p.sub,p.both,r),d&&(d.wf3=+new Date),p.hub=k(),k.map(x,p.stop),d&&(d.wf4=+new Date),c.write(x.file,p.hub,p.both,r),d&&(d.wf5=+new Date),console.STAT&&console.STAT(b,+new Date-b,"rad split",s(x.file),C),!0},p.slice=function(b,C){if(p.sub(p.end=C,b),p.limit<=++p.count)return!0},p.stop=function(b,C){if(C>=p.end)return!0;p.hub(C,b)},p.both=function(b,C){if(d&&(d.wfd=+new Date),T){a(b||T);return}if(_){a(b,C);return}_=!0,T=b},p.each=function(b,C,N,U){if(m!==b&&p.count++,E.max<=(b||"").length)return a("Data too big!"),!0;var A=F.encode(U.length)+"#"+F.encode(N)+(m===b?"":":"+F.encode(b))+`
`;if(E.chunk<p.text.length+A.length&&1<p.count&&!r.force)return p.split();p.text+=A},E.jsonify){c.write.jsonify(p,x,a,r,d);return}k.map(x,p.each,!0)||p.write()},c.write.jsonify=function(h,x,a,r,d){var p,_=+new Date;d&&(d.w=_);try{p=JSON.stringify(x.$)}catch{a("Cannot radisk!");return}if(d&&(d.ws=+new Date),console.STAT&&console.STAT(_,+new Date-_,"rad stringified JSON"),E.chunk<p.length&&!r.force){var T=0;if(k.map(x,function(){if(T++)return!0}),T>1)return h.split()}h.text=p,h.write()},c.range=function(h,x){if(!(!h||!x)){if(m===x.start&&m===x.end||f(h))return h;var a=k();return k.map(h,function(r,d){a(d,r)},x),a("")}},function(){c.read=function(h,x,a,r){a=a||{};var d={key:h};d.find=function(p){var _;if(d.file=p||(p=E.code.from),r&&(r=r[p]=r[p]||{}),r&&(r.rf=r.rf||+new Date),_=c.disk[d.file=p]){d.check(m,_);return}c.parse(p,d.check,m,r)},d.get=function(p,_,T){if(r&&(r.rgl=+new Date),r&&(r.rg=r.rg||+new Date),d.err=p||d.err){x(p);return}var b=d.file=(_||"").file||d.file;if(!_&&b!==E.code.from){c.find.bad(b),c.read(h,x,a);return}if(_=c.disk[b]||(c.disk[b]=_),!_){x(b===E.code.from?m:"No file!");return}_.file||(_.file=b);var C=c.range(_(h),a);if(r&&(r.rr=+new Date),a.unit=_.unit,a.chunks=(a.chunks||0)+1,a.parsed=(a.parsed||0)+((T||"").parsed||a.chunks*E.chunk),a.more=1,a.next=m,k.map(c.list,function(y,j){if(!(!y||b===j))return a.next=j,1},a.reverse?{reverse:1,end:b}:{start:b}),r&&(r.rl=+new Date),a.next||(a.more=0),a.next&&(!a.reverse&&(h<a.next&&a.next.indexOf(h)!=0||m!==a.end&&(a.end||"\uFFFF")<a.next)&&(a.more=0),a.reverse&&(h>a.next&&h.indexOf(a.next)!=0||m!==a.start&&(a.start||"")>a.next&&b<=a.start)&&(a.more=0)),!a.more){x(d.err,C,a);return}if(C&&x(d.err,C,a),!(a.parsed>=a.limit)){var N=+new Date;r&&(r.rm=N);var U=a.next;n(function(){console.STAT&&console.STAT(N,+new Date-N,"rad more"),c.parse(U,d.check)},0)}},d.check=function(p,_,T){if(d.get(p,_,T),!(!_||_.check)){_.check=1;var b=+new Date;(T||(T={})).file||(T.file=d.file),k.map(_,function(C,N){c.find(N,function(U){if((U||(U=E.code.from))!==T.file){var A=(""+Math.random()).slice(-3);w(function(){c.save(N,C,function y(j,$){if(j){c.save(N,C,y);return}console.STAT&&console.STAT("MISLOCATED DATA CORRECTED",A,s(N),s(T.file),s(U))})},0)}})}),console.STAT&&console.STAT(b,+new Date-b,"rad check")}},c.find(h||(a.reverse?a.end||"":a.start||""),d.find)}}(),function(){var h=0,x={},a=String.fromCharCode(31);c.parse=function(r,d,p,_){var T;if(!r)return d();if(T=x[r]){T.push(d);return}T=x[r]=[d];var b=function(){},C={file:r};(b.disk=k()).file=r,b.read=function(U,A){if(_&&(_.rpg=+new Date),console.STAT&&console.STAT(N,+new Date-N,"read disk",JSON.stringify(r),++h,"total all parses."),(b.err=U)||(b.not=!A)){delete x[r],b.map(T,b.ack);return}if(typeof A!="string"){try{E.max<=A.length?b.err="Chunk too big!":A=A.toString()}catch(y){b.err=y}if(b.err){delete x[r],b.map(T,b.ack);return}}if(C.parsed=A.length,_&&(_.rpl=C.parsed),_&&(_.rpa=T.length),N=+new Date,!(E.jsonify||A[0]==="{")){b.radec(U,A);return}u(A,function(y,j){if(!y){delete x[r],b.disk.$=j,console.STAT&&(l=+new Date-N)>9&&console.STAT(N,l,"rad parsed JSON"),_&&(_.rpd=+new Date),b.map(T,b.ack);return}if(A[0]==="{"){delete x[r],b.err="JSON error!",b.map(T,b.ack);return}b.radec(y,A)})},b.map=function(){if(!(!T||!T.length)){for(var U=+new Date,A=b.err,y=b.not?m:b.disk,j=0,$;j<9&&($=T[j++]);)$(A,y,C);console.STAT&&console.STAT(U,+new Date-U,"rad packs",s(r)),console.STAT&&console.STAT(U,j,"rad packs #",s(r)),(T=T.slice(j)).length&&w(b.map,0)}},b.ack=function(U){if(!!U){if(b.err||b.not){U(b.err,m,C);return}U(m,b.disk,C)}},b.radec=function(U,A){delete x[r],N=+new Date;var y=b.split(A),j=[],$,M,R;if(!y||y[1]!==0){b.err="File '"+r+"' does not have root radix! ",b.map(T,b.ack);return}for(;y;)M=R=m,$=y[1],y=b.split(y[2])||"",y[0]=="#"&&(M=y[1],j=j.slice(0,$),$<=j.length&&j.push(M)),y=b.split(y[2])||"",y[0]!=`
`&&((y[0]=="="||y[0]==":")&&(R=y[1]),m!==M&&m!==R&&b.disk(j.join(""),R),y=b.split(y[2]));console.STAT&&console.STAT(N,+new Date-N,"parsed RAD"),b.map(T,b.ack)},b.split=function(U){if(!!U){var A=[],y={},j=-1,$="";if(j=U.indexOf(a),!!U[j])return $=U.slice(0,j),A[0]=$,A[1]=F.decode(U.slice(j),y),A[2]=U.slice(j+y.i),A}},c.disk&&(p||(p=(c.disk[r]||"").raw));var N=+new Date;if(_&&(_.rp=N),p)return w(function(){b.read(m,p)},0);E.store.get(s(r),b.read)}}(),function(){var h,x=String.fromCharCode(28),a;c.find=function(p,_){if(!h){if(a){a.push([p,_]);return}a=[[p,_]],c.parse(x,r);return}k.map(c.list=h,function(T,b){if(!!T)return _(b)||!0},{reverse:1,end:p})||_(E.code.from)},c.find.add=function(p,_){var T=h(p);if(T||p===x){_(m,1);return}h(p,1),_.found=(_.found||0)+1,c.write(x,h,function(b,C){if(b){_(b);return}_.found=(_.found||0)-1,_.found===0&&_(m,1)},!0)},c.find.bad=function(p,_){h(p,0),c.write(x,h,_||g)};function r(p,_){if(p){E.log("list",p),setTimeout(function(){c.parse(x,r)},1e3);return}if(_){d(_);return}if(h=h||_||k(),!E.store.list){d(h);return}E.store.list(function(T){if(!T){d(h);return}c.find.add(T,g)})}function d(p,_){h=h||p,h.file=x,_=a,a=null,e(_,function(T){c.find(T[0],T[1])})}}();try{!v.window&&ut()(c)}catch{}var g=function(){},m;return F.has[E.file]=c,c}if(function(){var E=String.fromCharCode(31);F.encode=function(o,s,f){f=f||E;var n=f,w;if(typeof o=="string"){for(var e=o.indexOf(f);e!=-1;)n+=f,e=o.indexOf(f,e+1);return n+'"'+o+f}else{if(o&&o["#"]&&Object.keys(o).length==1)return n+"#"+w+n;if(typeof o=="number")return n+"+"+(o||0)+n;if(o===null)return n+" "+n;if(o===!0)return n+"+"+n;if(o===!1)return n+"-"+n}},F.decode=function(o,s,f){f=f||E;var n="",w=-1,e=0,l,u;if(f===o[0]){for(;f===o[++w];)++e;for(u=o[l=e]||!0;--e>=0;)w=o.indexOf(f,w+1);if(w==-1&&(w=o.length),n=o.slice(l+1,w),s&&(s.i=w+1),u==='"')return n;if(u==="#")return{"#":n};if(u==="+")return n.length===0?!0:parseFloat(n);if(u===" ")return null;if(u==="-")return!1}}}(),typeof window<"u"){var v=window.Gun,k=window.Radix;window.Radisk=F}else{var v=pe(),k=Pe.exports;try{Qe.exports=F}catch{}}F.Radix=k})();var ae=typeof window<"u"?window.Gun:pe();ae.on("create",function(F){ae.TESTING&&(F.opt.file="radatatest"),this.to.next(F);var v=F.opt,k;if(!(v.rad===!1||v.radisk===!1)&&!(k+""!=typeof process&&""+(process.env||"").RAD=="false")){var E=ae.window&&ae.window.Radisk||Qe.exports,o=E.Radix,s=E(v),f=String.fromCharCode(27),n=0;F.on("put",function(e){if(this.to.next(e),!(e._||"").rad){var l=e["#"],u=e.put,c=u["#"],D=u["."],g=u[":"],m=u[">"],h=(e._||"").DBG;h&&(h.sp=h.sp||+new Date);var x=(e._||"").RPS||((e._||"").RPS=+new Date);s(c+f+D,{":":g,">":m},function(a,r){if(h&&(h.spd=h.spd||+new Date),console.STAT&&console.STAT(x,+new Date-x,"put"),a){F.on("in",{"@":l,err:a,DBG:h});return}F.on("in",{"@":l,ok:r,DBG:h})},!1,h&&(h.r=h.r||{})),h&&(h.sps=h.sps||+new Date)}}),F.on("get",function(e){this.to.next(e);var l=e._||"",u=l.DBG=e.DBG;u&&(u.sg=+new Date);var c=e["#"],D=e.get,g=e.get["#"],m=e.get["."]||"",h={},x,a,r,d;if(typeof g=="string"?a=g:g&&(k!==(r=g["*"])&&(h.limit=d=1),k!==g[">"]&&(h.start=g[">"]),k!==g["<"]&&(h.end=g["<"]),a=d?""+r:r||g["="],d=null),a&&!h.limit&&(typeof m=="string"?a=a+f+(h.atom=m):m&&(k!==m[">"]&&(h.start=m[">"],h.limit=1),k!==m["<"]&&(h.end=m["<"],h.limit=1),k!==(r=m["*"])&&(h.limit=d=1),a&&(a=a+f+(d?""+(r||""):r||(h.atom=m["="]||""))))),((r=D["%"])||h.limit)&&(h.limit=r<=(h.pack||1e3*100)?r:1),(m["-"]||(g||{})["-"]||D["-"])&&(h.reverse=!0),(r=(F.next||"")[g])&&r.put){if(h.atom){if(r=(r.next||"")[h.atom],r&&r.rad)return}else if(r&&r.rad)return}var p=ae.state(),_=+new Date,T=0;u&&(u.sgm=_),s(a||"",function(C,N,U){u&&(u.sgr=+new Date),u&&(u.sgi=U);try{v.store.stats.get.time[w%50]=+new Date-_,++w,v.store.stats.get.count++,C&&(v.store.stats.get.err=C)}catch{}console.STAT&&console.STAT(_,+new Date-_,"got",JSON.stringify(a)),_=+new Date,U=U||"";var A,y;if(U.unit&&N&&k!==(A=N[":"])&&k!==(y=N[">"])){var j=a.split(f),$=j[0],M=j[1];(x=x||{})[$]=ae.state.ify(x[$],M,y,A,$),F.$.get($).get(M)._.rad=p}else N&&(typeof N!="string"&&(h.atom?N=k:o.map(N,b,h)),!x&&N&&b(N,""),!h.atom&&!m&typeof g=="string"&&!h.limit&&!h.more&&(F.$.get(g)._.rad=p));u&&(u.sgp=+new Date),console.STAT&&(n=+new Date-_)>9&&(console.STAT(_,n,"got prep time"),console.STAT(_,T,"got prep #")),T=0,_=+new Date;var R=function(){};R.faith=!0,R.rad=D,F.on("in",{"@":c,put:x,"%":U.more?1:k,err:C||k,_:R,DBG:u}),console.STAT&&(n=+new Date-_)>9&&console.STAT(_,n,"got emit",Object.keys(x||{}).length),x=k},h,u&&(u.r=u.r||{})),u&&(u.sgd=+new Date),console.STAT&&(n=+new Date-_)>9&&console.STAT(_,n,"get call");function b(C,N,U,A){if(T++,!!C){N=(a+N).split(f);var y=N.slice(0,1)[0];if(N=N.slice(-1)[0],h.limit&&h.limit<=h.count)return!0;var j,$,M=y,R=N;if(typeof C!="string"){j=C[":"],$=C[">"],(x=x||{})[M]=ae.state.ify(x[M],R,$,j,M),h.count=(h.count||0)+((j||"").length||9);return}h.count=(h.count||0)+C.length;var B=C.lastIndexOf(">"),P=E.decode(C.slice(B+1),null,f);C=E.decode(C.slice(0,B),null,f),(x=x||{})[y]=ae.state.ify(x[y],N,P,C,y)}}}),ae.valid,(v.store||{}).stats={get:{time:{},count:0},put:{time:{},count:0}};var w=0}});var at={exports:{}};(function(){function F(k){k=k||{},k.file=String(k.file||"radata");var E=F[k.file],o=null,s;if(E)return console.log("Warning: reusing same IndexedDB store and options as 1st."),F[k.file];E=F[k.file]=function(){};try{k.indexedDB=k.indexedDB||F.indexedDB||indexedDB}catch{}try{if(!k.indexedDB||location.protocol=="file:"){var f=E.d||(E.d={});return E.put=function(n,w,e){f[n]=w,setTimeout(function(){e(null,1)},250)},E.get=function(n,w){setTimeout(function(){w(null,f[n]||s)},5)},console.log("Warning: No indexedDB exists to persist data to!"),E}}catch{}return E.start=function(){var n=indexedDB.open(k.file,1);n.onupgradeneeded=function(w){w.target.result.createObjectStore(k.file)},n.onsuccess=function(){o=n.result},n.onerror=function(w){console.log(w||1)}},E.start(),E.put=function(n,w,e){if(!o){setTimeout(function(){E.put(n,w,e)},1);return}var l=o.transaction([k.file],"readwrite"),u=l.objectStore(k.file),c=u.put(w,""+n);c.onsuccess=u.onsuccess=l.onsuccess=function(){e(null,1)},c.onabort=u.onabort=l.onabort=function(D){e(D||"put.tx.abort")},c.onerror=u.onerror=l.onerror=function(D){e(D||"put.tx.error")}},E.get=function(n,w){if(!o){setTimeout(function(){E.get(n,w)},9);return}var e=o.transaction([k.file],"readonly"),l=e.objectStore(k.file),u=l.get(""+n);u.onsuccess=function(){w(null,u.result)},u.onabort=function(c){w(c||4)},u.onerror=function(c){w(c||5)}},setInterval(function(){o&&o.close(),o=null,E.start()},1e3*15),E}if(typeof window<"u")(F.window=window).RindexedDB=F,F.indexedDB=window.indexedDB;else try{at.exports=F}catch{}try{var v=F.window.Gun||pe();v.on("create",function(k){this.to.next(k),k.opt.store=k.opt.store||F(k.opt)})}catch{}})();(function(){var F=typeof window<"u"?window.Gun:pe();F.on("opt",function(v){this.to.next(v);var k=v.opt;if(v.once||!F.Mesh||k.RTCPeerConnection===!1)return;var E;typeof window<"u"&&(E=window),typeof xe<"u"&&(E=xe),E=E||{};var o=k.RTCPeerConnection||E.RTCPeerConnection||E.webkitRTCPeerConnection||E.mozRTCPeerConnection,s=k.RTCSessionDescription||E.RTCSessionDescription||E.webkitRTCSessionDescription||E.mozRTCSessionDescription,f=k.RTCIceCandidate||E.RTCIceCandidate||E.webkitRTCIceCandidate||E.mozRTCIceCandidate;if(!o||!s||!f)return;k.RTCPeerConnection=o,k.RTCSessionDescription=s,k.RTCIceCandidate=f,k.rtc=k.rtc||{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.sipgate.net:3478"}]},k.rtc.dataChannel=k.rtc.dataChannel||{ordered:!1,maxRetransmits:2},k.rtc.sdp=k.rtc.sdp||{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},k.rtc.max=k.rtc.max||55,k.rtc.room=k.rtc.room||F.window&&(location.hash.slice(1)||location.pathname.slice(1)),k.announce=function(e){k.rtc.start=+new Date,v.$.get("/RTC/"+k.rtc.room+"<?99").get("+").put(k.pid,function(l){!l.ok||!l.ok.rtc||w(l)},{acks:k.rtc.max}).on(function(l,u,c){l===k.pid||k.rtc.start>c.put[">"]||w({"#":""+c["#"],ok:{rtc:{id:l}}})})};var n=k.mesh=k.mesh||F.Mesh(v);v.on("create",function(e){this.to.next(e),setTimeout(k.announce,1)});function w(e){if(this&&this.off&&this.off(),!!e.ok){var l=e.ok.rtc,u,c;if(!(!l||!l.id||l.id===k.pid)){if(c=l.answer)return!(u=k.peers[l.id]||w[l.id])||u.remoteSet?void 0:(c.sdp=c.sdp.replace(/\\r\\n/g,`\r
`),u.setRemoteDescription(u.remoteSet=new k.RTCSessionDescription(c)));if(c=l.candidate)return u=k.peers[l.id]||w[l.id]||w({ok:{rtc:{id:l.id}}}),u.addIceCandidate(new k.RTCIceCandidate(c));if(!w[l.id]){(u=new k.RTCPeerConnection(k.rtc)).id=l.id;var D=u.wire=u.createDataChannel("dc",k.rtc.dataChannel);if(w[l.id]=u,D.to=setTimeout(function(){delete w[l.id]},1e3*60),D.onclose=function(){n.bye(u)},D.onerror=function(g){},D.onopen=function(g){delete w[l.id],n.hi(u)},D.onmessage=function(g){!g||n.hear(g.data||g,u)},u.onicecandidate=function(g){!g.candidate||v.on("out",{"@":e["#"],ok:{rtc:{candidate:g.candidate,id:k.pid}}})},u.ondatachannel=function(g){var m=g.channel;m.onmessage=D.onmessage,m.onopen=D.onopen,m.onclose=D.onclose},c=l.offer){l.offer.sdp=l.offer.sdp.replace(/\\r\\n/g,`\r
`),u.setRemoteDescription(new k.RTCSessionDescription(c)),u.createAnswer(function(g){u.setLocalDescription(g),v.on("out",{"@":e["#"],ok:{rtc:{answer:g,id:k.pid}}})},function(){},k.rtc.sdp);return}return u.createOffer(function(g){u.setLocalDescription(g),v.on("out",{"@":e["#"],"#":v.ask(w),ok:{rtc:{offer:g,id:k.pid}}})},function(){},k.rtc.sdp),u}}}}})})();(function(){var F=typeof window<"u"?window.Gun:pe();F.on("create",function(v){F.log.once("nts","gun/nts is removed deprecated old"),this.to.next(v)})})();var Xe={},Ae={};Ae.byteLength=ct;Ae.toByteArray=ht;Ae.fromByteArray=yt;var oe=[],re=[],ft=typeof Uint8Array<"u"?Uint8Array:Array,De="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ye=0,st=De.length;ye<st;++ye)oe[ye]=De[ye],re[De.charCodeAt(ye)]=ye;re["-".charCodeAt(0)]=62;re["_".charCodeAt(0)]=63;function Ze(F){var v=F.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=F.indexOf("=");k===-1&&(k=v);var E=k===v?0:4-k%4;return[k,E]}function ct(F){var v=Ze(F),k=v[0],E=v[1];return(k+E)*3/4-E}function lt(F,v,k){return(v+k)*3/4-k}function ht(F){var v,k=Ze(F),E=k[0],o=k[1],s=new ft(lt(F,E,o)),f=0,n=o>0?E-4:E,w;for(w=0;w<n;w+=4)v=re[F.charCodeAt(w)]<<18|re[F.charCodeAt(w+1)]<<12|re[F.charCodeAt(w+2)]<<6|re[F.charCodeAt(w+3)],s[f++]=v>>16&255,s[f++]=v>>8&255,s[f++]=v&255;return o===2&&(v=re[F.charCodeAt(w)]<<2|re[F.charCodeAt(w+1)]>>4,s[f++]=v&255),o===1&&(v=re[F.charCodeAt(w)]<<10|re[F.charCodeAt(w+1)]<<4|re[F.charCodeAt(w+2)]>>2,s[f++]=v>>8&255,s[f++]=v&255),s}function pt(F){return oe[F>>18&63]+oe[F>>12&63]+oe[F>>6&63]+oe[F&63]}function dt(F,v,k){for(var E,o=[],s=v;s<k;s+=3)E=(F[s]<<16&16711680)+(F[s+1]<<8&65280)+(F[s+2]&255),o.push(pt(E));return o.join("")}function yt(F){for(var v,k=F.length,E=k%3,o=[],s=16383,f=0,n=k-E;f<n;f+=s)o.push(dt(F,f,f+s>n?n:f+s));return E===1?(v=F[k-1],o.push(oe[v>>2]+oe[v<<4&63]+"==")):E===2&&(v=(F[k-2]<<8)+F[k-1],o.push(oe[v>>10]+oe[v>>4&63]+oe[v<<2&63]+"=")),o.join("")}var Le={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Le.read=function(F,v,k,E,o){var s,f,n=o*8-E-1,w=(1<<n)-1,e=w>>1,l=-7,u=k?o-1:0,c=k?-1:1,D=F[v+u];for(u+=c,s=D&(1<<-l)-1,D>>=-l,l+=n;l>0;s=s*256+F[v+u],u+=c,l-=8);for(f=s&(1<<-l)-1,s>>=-l,l+=E;l>0;f=f*256+F[v+u],u+=c,l-=8);if(s===0)s=1-e;else{if(s===w)return f?NaN:(D?-1:1)*(1/0);f=f+Math.pow(2,E),s=s-e}return(D?-1:1)*f*Math.pow(2,s-E)};Le.write=function(F,v,k,E,o,s){var f,n,w,e=s*8-o-1,l=(1<<e)-1,u=l>>1,c=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=E?0:s-1,g=E?1:-1,m=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(n=isNaN(v)?1:0,f=l):(f=Math.floor(Math.log(v)/Math.LN2),v*(w=Math.pow(2,-f))<1&&(f--,w*=2),f+u>=1?v+=c/w:v+=c*Math.pow(2,1-u),v*w>=2&&(f++,w/=2),f+u>=l?(n=0,f=l):f+u>=1?(n=(v*w-1)*Math.pow(2,o),f=f+u):(n=v*Math.pow(2,u-1)*Math.pow(2,o),f=0));o>=8;F[k+D]=n&255,D+=g,n/=256,o-=8);for(f=f<<o|n,e+=o;e>0;F[k+D]=f&255,D+=g,f/=256,e-=8);F[k+D-g]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(F){var v=Ae,k=Le,E=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;F.Buffer=n,F.SlowBuffer=a,F.INSPECT_MAX_BYTES=50;var o=2147483647;F.kMaxLength=o,n.TYPED_ARRAY_SUPPORT=s(),!n.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var S=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(S,t),S.foo()===42}catch{return!1}}Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.byteOffset}});function f(S){if(S>o)throw new RangeError('The value "'+S+'" is invalid for option "size"');var t=new Uint8Array(S);return Object.setPrototypeOf(t,n.prototype),t}function n(S,t,i){if(typeof S=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(S)}return w(S,t,i)}n.poolSize=8192;function w(S,t,i){if(typeof S=="string")return c(S,t);if(ArrayBuffer.isView(S))return g(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(te(S,ArrayBuffer)||S&&te(S.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(te(S,SharedArrayBuffer)||S&&te(S.buffer,SharedArrayBuffer)))return m(S,t,i);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var O=S.valueOf&&S.valueOf();if(O!=null&&O!==S)return n.from(O,t,i);var I=h(S);if(I)return I;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return n.from(S[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}n.from=function(S,t,i){return w(S,t,i)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array);function e(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function l(S,t,i){return e(S),S<=0?f(S):t!==void 0?typeof i=="string"?f(S).fill(t,i):f(S).fill(t):f(S)}n.alloc=function(S,t,i){return l(S,t,i)};function u(S){return e(S),f(S<0?0:x(S)|0)}n.allocUnsafe=function(S){return u(S)},n.allocUnsafeSlow=function(S){return u(S)};function c(S,t){if((typeof t!="string"||t==="")&&(t="utf8"),!n.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var i=r(S,t)|0,O=f(i),I=O.write(S,t);return I!==i&&(O=O.slice(0,I)),O}function D(S){for(var t=S.length<0?0:x(S.length)|0,i=f(t),O=0;O<t;O+=1)i[O]=S[O]&255;return i}function g(S){if(te(S,Uint8Array)){var t=new Uint8Array(S);return m(t.buffer,t.byteOffset,t.byteLength)}return D(S)}function m(S,t,i){if(t<0||S.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');var O;return t===void 0&&i===void 0?O=new Uint8Array(S):i===void 0?O=new Uint8Array(S,t):O=new Uint8Array(S,t,i),Object.setPrototypeOf(O,n.prototype),O}function h(S){if(n.isBuffer(S)){var t=x(S.length)|0,i=f(t);return i.length===0||S.copy(i,0,0,t),i}if(S.length!==void 0)return typeof S.length!="number"||Te(S.length)?f(0):D(S);if(S.type==="Buffer"&&Array.isArray(S.data))return D(S.data)}function x(S){if(S>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return S|0}function a(S){return+S!=S&&(S=0),n.alloc(+S)}n.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==n.prototype},n.compare=function(t,i){if(te(t,Uint8Array)&&(t=n.from(t,t.offset,t.byteLength)),te(i,Uint8Array)&&(i=n.from(i,i.offset,i.byteLength)),!n.isBuffer(t)||!n.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===i)return 0;for(var O=t.length,I=i.length,J=0,L=Math.min(O,I);J<L;++J)if(t[J]!==i[J]){O=t[J],I=i[J];break}return O<I?-1:I<O?1:0},n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(t,i){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return n.alloc(0);var O;if(i===void 0)for(i=0,O=0;O<t.length;++O)i+=t[O].length;var I=n.allocUnsafe(i),J=0;for(O=0;O<t.length;++O){var L=t[O];if(te(L,Uint8Array))J+L.length>I.length?n.from(L).copy(I,J):Uint8Array.prototype.set.call(I,L,J);else if(n.isBuffer(L))L.copy(I,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=L.length}return I};function r(S,t){if(n.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||te(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);var i=S.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&i===0)return 0;for(var I=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return ne(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return ie(S).length;default:if(I)return O?-1:ne(S).length;t=(""+t).toLowerCase(),I=!0}}n.byteLength=r;function d(S,t,i){var O=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,t>>>=0,i<=t))return"";for(S||(S="utf8");;)switch(S){case"hex":return P(this,t,i);case"utf8":case"utf-8":return j(this,t,i);case"ascii":return R(this,t,i);case"latin1":case"binary":return B(this,t,i);case"base64":return y(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,t,i);default:if(O)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),O=!0}}n.prototype._isBuffer=!0;function p(S,t,i){var O=S[t];S[t]=S[i],S[i]=O}n.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)p(this,i,i+1);return this},n.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)p(this,i,i+3),p(this,i+1,i+2);return this},n.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)p(this,i,i+7),p(this,i+1,i+6),p(this,i+2,i+5),p(this,i+3,i+4);return this},n.prototype.toString=function(){var t=this.length;return t===0?"":arguments.length===0?j(this,0,t):d.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:n.compare(this,t)===0},n.prototype.inspect=function(){var t="",i=F.INSPECT_MAX_BYTES;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},E&&(n.prototype[E]=n.prototype.inspect),n.prototype.compare=function(t,i,O,I,J){if(te(t,Uint8Array)&&(t=n.from(t,t.offset,t.byteLength)),!n.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(i===void 0&&(i=0),O===void 0&&(O=t?t.length:0),I===void 0&&(I=0),J===void 0&&(J=this.length),i<0||O>t.length||I<0||J>this.length)throw new RangeError("out of range index");if(I>=J&&i>=O)return 0;if(I>=J)return-1;if(i>=O)return 1;if(i>>>=0,O>>>=0,I>>>=0,J>>>=0,this===t)return 0;for(var L=J-I,H=O-i,Y=Math.min(L,H),z=this.slice(I,J),X=t.slice(i,O),Q=0;Q<Y;++Q)if(z[Q]!==X[Q]){L=z[Q],H=X[Q];break}return L<H?-1:H<L?1:0};function _(S,t,i,O,I){if(S.length===0)return-1;if(typeof i=="string"?(O=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,Te(i)&&(i=I?0:S.length-1),i<0&&(i=S.length+i),i>=S.length){if(I)return-1;i=S.length-1}else if(i<0)if(I)i=0;else return-1;if(typeof t=="string"&&(t=n.from(t,O)),n.isBuffer(t))return t.length===0?-1:T(S,t,i,O,I);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(S,t,i):Uint8Array.prototype.lastIndexOf.call(S,t,i):T(S,[t],i,O,I);throw new TypeError("val must be string, number or Buffer")}function T(S,t,i,O,I){var J=1,L=S.length,H=t.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(S.length<2||t.length<2)return-1;J=2,L/=2,H/=2,i/=2}function Y(Ke,Ve){return J===1?Ke[Ve]:Ke.readUInt16BE(Ve*J)}var z;if(I){var X=-1;for(z=i;z<L;z++)if(Y(S,z)===Y(t,X===-1?0:z-X)){if(X===-1&&(X=z),z-X+1===H)return X*J}else X!==-1&&(z-=z-X),X=-1}else for(i+H>L&&(i=L-H),z=i;z>=0;z--){for(var Q=!0,ke=0;ke<H;ke++)if(Y(S,z+ke)!==Y(t,ke)){Q=!1;break}if(Q)return z}return-1}n.prototype.includes=function(t,i,O){return this.indexOf(t,i,O)!==-1},n.prototype.indexOf=function(t,i,O){return _(this,t,i,O,!0)},n.prototype.lastIndexOf=function(t,i,O){return _(this,t,i,O,!1)};function b(S,t,i,O){i=Number(i)||0;var I=S.length-i;O?(O=Number(O),O>I&&(O=I)):O=I;var J=t.length;O>J/2&&(O=J/2);for(var L=0;L<O;++L){var H=parseInt(t.substr(L*2,2),16);if(Te(H))return L;S[i+L]=H}return L}function C(S,t,i,O){return ue(ne(t,S.length-i),S,i,O)}function N(S,t,i,O){return ue(de(t),S,i,O)}function U(S,t,i,O){return ue(ie(t),S,i,O)}function A(S,t,i,O){return ue(be(t,S.length-i),S,i,O)}n.prototype.write=function(t,i,O,I){if(i===void 0)I="utf8",O=this.length,i=0;else if(O===void 0&&typeof i=="string")I=i,O=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(O)?(O=O>>>0,I===void 0&&(I="utf8")):(I=O,O=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var J=this.length-i;if((O===void 0||O>J)&&(O=J),t.length>0&&(O<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");for(var L=!1;;)switch(I){case"hex":return b(this,t,i,O);case"utf8":case"utf-8":return C(this,t,i,O);case"ascii":case"latin1":case"binary":return N(this,t,i,O);case"base64":return U(this,t,i,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,i,O);default:if(L)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),L=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function y(S,t,i){return t===0&&i===S.length?v.fromByteArray(S):v.fromByteArray(S.slice(t,i))}function j(S,t,i){i=Math.min(S.length,i);for(var O=[],I=t;I<i;){var J=S[I],L=null,H=J>239?4:J>223?3:J>191?2:1;if(I+H<=i){var Y,z,X,Q;switch(H){case 1:J<128&&(L=J);break;case 2:Y=S[I+1],(Y&192)===128&&(Q=(J&31)<<6|Y&63,Q>127&&(L=Q));break;case 3:Y=S[I+1],z=S[I+2],(Y&192)===128&&(z&192)===128&&(Q=(J&15)<<12|(Y&63)<<6|z&63,Q>2047&&(Q<55296||Q>57343)&&(L=Q));break;case 4:Y=S[I+1],z=S[I+2],X=S[I+3],(Y&192)===128&&(z&192)===128&&(X&192)===128&&(Q=(J&15)<<18|(Y&63)<<12|(z&63)<<6|X&63,Q>65535&&Q<1114112&&(L=Q))}}L===null?(L=65533,H=1):L>65535&&(L-=65536,O.push(L>>>10&1023|55296),L=56320|L&1023),O.push(L),I+=H}return M(O)}var $=4096;function M(S){var t=S.length;if(t<=$)return String.fromCharCode.apply(String,S);for(var i="",O=0;O<t;)i+=String.fromCharCode.apply(String,S.slice(O,O+=$));return i}function R(S,t,i){var O="";i=Math.min(S.length,i);for(var I=t;I<i;++I)O+=String.fromCharCode(S[I]&127);return O}function B(S,t,i){var O="";i=Math.min(S.length,i);for(var I=t;I<i;++I)O+=String.fromCharCode(S[I]);return O}function P(S,t,i){var O=S.length;(!t||t<0)&&(t=0),(!i||i<0||i>O)&&(i=O);for(var I="",J=t;J<i;++J)I+=et[S[J]];return I}function K(S,t,i){for(var O=S.slice(t,i),I="",J=0;J<O.length-1;J+=2)I+=String.fromCharCode(O[J]+O[J+1]*256);return I}n.prototype.slice=function(t,i){var O=this.length;t=~~t,i=i===void 0?O:~~i,t<0?(t+=O,t<0&&(t=0)):t>O&&(t=O),i<0?(i+=O,i<0&&(i=0)):i>O&&(i=O),i<t&&(i=t);var I=this.subarray(t,i);return Object.setPrototypeOf(I,n.prototype),I};function V(S,t,i){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+t>i)throw new RangeError("Trying to access beyond buffer length")}n.prototype.readUintLE=n.prototype.readUIntLE=function(t,i,O){t=t>>>0,i=i>>>0,O||V(t,i,this.length);for(var I=this[t],J=1,L=0;++L<i&&(J*=256);)I+=this[t+L]*J;return I},n.prototype.readUintBE=n.prototype.readUIntBE=function(t,i,O){t=t>>>0,i=i>>>0,O||V(t,i,this.length);for(var I=this[t+--i],J=1;i>0&&(J*=256);)I+=this[t+--i]*J;return I},n.prototype.readUint8=n.prototype.readUInt8=function(t,i){return t=t>>>0,i||V(t,1,this.length),this[t]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(t,i){return t=t>>>0,i||V(t,2,this.length),this[t]|this[t+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(t,i){return t=t>>>0,i||V(t,2,this.length),this[t]<<8|this[t+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(t,i){return t=t>>>0,i||V(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(t,i){return t=t>>>0,i||V(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},n.prototype.readIntLE=function(t,i,O){t=t>>>0,i=i>>>0,O||V(t,i,this.length);for(var I=this[t],J=1,L=0;++L<i&&(J*=256);)I+=this[t+L]*J;return J*=128,I>=J&&(I-=Math.pow(2,8*i)),I},n.prototype.readIntBE=function(t,i,O){t=t>>>0,i=i>>>0,O||V(t,i,this.length);for(var I=i,J=1,L=this[t+--I];I>0&&(J*=256);)L+=this[t+--I]*J;return J*=128,L>=J&&(L-=Math.pow(2,8*i)),L},n.prototype.readInt8=function(t,i){return t=t>>>0,i||V(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},n.prototype.readInt16LE=function(t,i){t=t>>>0,i||V(t,2,this.length);var O=this[t]|this[t+1]<<8;return O&32768?O|4294901760:O},n.prototype.readInt16BE=function(t,i){t=t>>>0,i||V(t,2,this.length);var O=this[t+1]|this[t]<<8;return O&32768?O|4294901760:O},n.prototype.readInt32LE=function(t,i){return t=t>>>0,i||V(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},n.prototype.readInt32BE=function(t,i){return t=t>>>0,i||V(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},n.prototype.readFloatLE=function(t,i){return t=t>>>0,i||V(t,4,this.length),k.read(this,t,!0,23,4)},n.prototype.readFloatBE=function(t,i){return t=t>>>0,i||V(t,4,this.length),k.read(this,t,!1,23,4)},n.prototype.readDoubleLE=function(t,i){return t=t>>>0,i||V(t,8,this.length),k.read(this,t,!0,52,8)},n.prototype.readDoubleBE=function(t,i){return t=t>>>0,i||V(t,8,this.length),k.read(this,t,!1,52,8)};function W(S,t,i,O,I,J){if(!n.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>I||t<J)throw new RangeError('"value" argument is out of bounds');if(i+O>S.length)throw new RangeError("Index out of range")}n.prototype.writeUintLE=n.prototype.writeUIntLE=function(t,i,O,I){if(t=+t,i=i>>>0,O=O>>>0,!I){var J=Math.pow(2,8*O)-1;W(this,t,i,O,J,0)}var L=1,H=0;for(this[i]=t&255;++H<O&&(L*=256);)this[i+H]=t/L&255;return i+O},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(t,i,O,I){if(t=+t,i=i>>>0,O=O>>>0,!I){var J=Math.pow(2,8*O)-1;W(this,t,i,O,J,0)}var L=O-1,H=1;for(this[i+L]=t&255;--L>=0&&(H*=256);)this[i+L]=t/H&255;return i+O},n.prototype.writeUint8=n.prototype.writeUInt8=function(t,i,O){return t=+t,i=i>>>0,O||W(this,t,i,1,255,0),this[i]=t&255,i+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(t,i,O){return t=+t,i=i>>>0,O||W(this,t,i,2,65535,0),this[i]=t&255,this[i+1]=t>>>8,i+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(t,i,O){return t=+t,i=i>>>0,O||W(this,t,i,2,65535,0),this[i]=t>>>8,this[i+1]=t&255,i+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(t,i,O){return t=+t,i=i>>>0,O||W(this,t,i,4,4294967295,0),this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=t&255,i+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(t,i,O){return t=+t,i=i>>>0,O||W(this,t,i,4,4294967295,0),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255,i+4},n.prototype.writeIntLE=function(t,i,O,I){if(t=+t,i=i>>>0,!I){var J=Math.pow(2,8*O-1);W(this,t,i,O,J-1,-J)}var L=0,H=1,Y=0;for(this[i]=t&255;++L<O&&(H*=256);)t<0&&Y===0&&this[i+L-1]!==0&&(Y=1),this[i+L]=(t/H>>0)-Y&255;return i+O},n.prototype.writeIntBE=function(t,i,O,I){if(t=+t,i=i>>>0,!I){var J=Math.pow(2,8*O-1);W(this,t,i,O,J-1,-J)}var L=O-1,H=1,Y=0;for(this[i+L]=t&255;--L>=0&&(H*=256);)t<0&&Y===0&&this[i+L+1]!==0&&(Y=1),this[i+L]=(t/H>>0)-Y&255;return i+O},n.prototype.writeInt8=function(t,i,O){return t=+t,i=i>>>0,O||W(this,t,i,1,127,-128),t<0&&(t=255+t+1),this[i]=t&255,i+1},n.prototype.writeInt16LE=function(t,i,O){return t=+t,i=i>>>0,O||W(this,t,i,2,32767,-32768),this[i]=t&255,this[i+1]=t>>>8,i+2},n.prototype.writeInt16BE=function(t,i,O){return t=+t,i=i>>>0,O||W(this,t,i,2,32767,-32768),this[i]=t>>>8,this[i+1]=t&255,i+2},n.prototype.writeInt32LE=function(t,i,O){return t=+t,i=i>>>0,O||W(this,t,i,4,2147483647,-2147483648),this[i]=t&255,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24,i+4},n.prototype.writeInt32BE=function(t,i,O){return t=+t,i=i>>>0,O||W(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255,i+4};function G(S,t,i,O,I,J){if(i+O>S.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function q(S,t,i,O,I){return t=+t,i=i>>>0,I||G(S,t,i,4),k.write(S,t,i,O,23,4),i+4}n.prototype.writeFloatLE=function(t,i,O){return q(this,t,i,!0,O)},n.prototype.writeFloatBE=function(t,i,O){return q(this,t,i,!1,O)};function Z(S,t,i,O,I){return t=+t,i=i>>>0,I||G(S,t,i,8),k.write(S,t,i,O,52,8),i+8}n.prototype.writeDoubleLE=function(t,i,O){return Z(this,t,i,!0,O)},n.prototype.writeDoubleBE=function(t,i,O){return Z(this,t,i,!1,O)},n.prototype.copy=function(t,i,O,I){if(!n.isBuffer(t))throw new TypeError("argument should be a Buffer");if(O||(O=0),!I&&I!==0&&(I=this.length),i>=t.length&&(i=t.length),i||(i=0),I>0&&I<O&&(I=O),I===O||t.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),t.length-i<I-O&&(I=t.length-i+O);var J=I-O;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,O,I):Uint8Array.prototype.set.call(t,this.subarray(O,I),i),J},n.prototype.fill=function(t,i,O,I){if(typeof t=="string"){if(typeof i=="string"?(I=i,i=0,O=this.length):typeof O=="string"&&(I=O,O=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!n.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(t.length===1){var J=t.charCodeAt(0);(I==="utf8"&&J<128||I==="latin1")&&(t=J)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(i<0||this.length<i||this.length<O)throw new RangeError("Out of range index");if(O<=i)return this;i=i>>>0,O=O===void 0?this.length:O>>>0,t||(t=0);var L;if(typeof t=="number")for(L=i;L<O;++L)this[L]=t;else{var H=n.isBuffer(t)?t:n.from(t,I),Y=H.length;if(Y===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(L=0;L<O-i;++L)this[L+i]=H[L%Y]}return this};var ee=/[^+/0-9A-Za-z-_]/g;function se(S){if(S=S.split("=")[0],S=S.trim().replace(ee,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function ne(S,t){t=t||1/0;for(var i,O=S.length,I=null,J=[],L=0;L<O;++L){if(i=S.charCodeAt(L),i>55295&&i<57344){if(!I){if(i>56319){(t-=3)>-1&&J.push(239,191,189);continue}else if(L+1===O){(t-=3)>-1&&J.push(239,191,189);continue}I=i;continue}if(i<56320){(t-=3)>-1&&J.push(239,191,189),I=i;continue}i=(I-55296<<10|i-56320)+65536}else I&&(t-=3)>-1&&J.push(239,191,189);if(I=null,i<128){if((t-=1)<0)break;J.push(i)}else if(i<2048){if((t-=2)<0)break;J.push(i>>6|192,i&63|128)}else if(i<65536){if((t-=3)<0)break;J.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((t-=4)<0)break;J.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return J}function de(S){for(var t=[],i=0;i<S.length;++i)t.push(S.charCodeAt(i)&255);return t}function be(S,t){for(var i,O,I,J=[],L=0;L<S.length&&!((t-=2)<0);++L)i=S.charCodeAt(L),O=i>>8,I=i%256,J.push(I),J.push(O);return J}function ie(S){return v.toByteArray(se(S))}function ue(S,t,i,O){for(var I=0;I<O&&!(I+i>=t.length||I>=S.length);++I)t[I+i]=S[I];return I}function te(S,t){return S instanceof t||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===t.name}function Te(S){return S!==S}var et=function(){for(var S="0123456789abcdef",t=new Array(256),i=0;i<16;++i)for(var O=i*16,I=0;I<16;++I)t[O+I]=S[i]+S[I];return t}()})(Xe);var ve=1e3,ge=ve*60,me=ge*60,he=me*24,wt=he*7,vt=he*365.25,gt=function(F,v){v=v||{};var k=typeof F;if(k==="string"&&F.length>0)return mt(F);if(k==="number"&&isFinite(F))return v.long?bt(F):xt(F);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(F))};function mt(F){if(F=String(F),!(F.length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(F);if(!!v){var k=parseFloat(v[1]),E=(v[2]||"ms").toLowerCase();switch(E){case"years":case"year":case"yrs":case"yr":case"y":return k*vt;case"weeks":case"week":case"w":return k*wt;case"days":case"day":case"d":return k*he;case"hours":case"hour":case"hrs":case"hr":case"h":return k*me;case"minutes":case"minute":case"mins":case"min":case"m":return k*ge;case"seconds":case"second":case"secs":case"sec":case"s":return k*ve;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return k;default:return}}}}function xt(F){var v=Math.abs(F);return v>=he?Math.round(F/he)+"d":v>=me?Math.round(F/me)+"h":v>=ge?Math.round(F/ge)+"m":v>=ve?Math.round(F/ve)+"s":F+"ms"}function bt(F){var v=Math.abs(F);return v>=he?Se(F,v,he,"day"):v>=me?Se(F,v,me,"hour"):v>=ge?Se(F,v,ge,"minute"):v>=ve?Se(F,v,ve,"second"):F+" ms"}function Se(F,v,k,E){var o=v>=k*1.5;return Math.round(F/k)+" "+E+(o?"s":"")}const kt="localhost:8765",Ce=tt("peer",kt),fe=Me({list:[],peer:Ce.value,host:new URL(Ce.value).hostname,status:"offline",started:0,pulse:0,lag:0,diff:we(()=>fe.pulse-fe.started),age:we(()=>gt(fe.diff)),delay:we(()=>Date.now()-fe.pulse),blink:!1});le(()=>fe.pulse,(F,v)=>{fe.blink=!fe.blink,fe.lag=F-v-500});var St={exports:{}};(function(F){(function(){function v(E,o){return o?Je(E):E.slice?v[s(E)]:function(f,n){E(f={exports:{}}),v[s(n)]=f.exports};function s(f){return f.split("/").slice(-1).toString().replace(".js","")}}var k=F;v(function(E){typeof window<"u"&&(E.window=window);var o=E.window||E,s,f=o.SEA||{};(f.window=E.window)&&(f.window.SEA=f);try{s+""!=typeof k&&(k.exports=f)}catch{}E.exports=f})(v,"./root"),v(function(E){var o=v("./root");try{o.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(v,"./https"),v(function(E){var o;if(o+""==typeof btoa){if(o+""==typeof Buffer)try{xe.Buffer=v("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}xe.btoa=function(s){return Buffer.from(s,"binary").toString("base64")},xe.atob=function(s){return Buffer.from(s,"base64").toString("binary")}}})(v,"./base64"),v(function(E){v("./base64");function o(){}Object.assign(o,{from:Array.from}),o.prototype=Object.create(Array.prototype),o.prototype.toString=function(s,f,n){s=s||"utf8",f=f||0;const w=this.length;if(s==="hex"){const e=new Uint8Array(this);return[...Array((n&&n+1||w)-f).keys()].map(l=>e[l+f].toString(16).padStart(2,"0")).join("")}if(s==="utf8")return Array.from({length:(n||w)-f},(e,l)=>String.fromCharCode(this[l+f])).join("");if(s==="base64")return btoa(this)},E.exports=o})(v,"./array"),v(function(E){v("./base64");var o=v("./array");function s(...f){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),s.from(...f)}s.prototype=Object.create(Array.prototype),Object.assign(s,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const f=arguments[0];let n;if(typeof f=="string"){const e=arguments[1]||"utf8";if(e==="hex"){const l=f.match(/([\da-fA-F]{2})/g).map(u=>parseInt(u,16));if(!l||!l.length)throw new TypeError("Invalid first argument for type 'hex'.");n=o.from(l)}else if(e==="utf8"||e==="binary"){const l=f.length,u=new Uint16Array(l);Array.from({length:l},(c,D)=>u[D]=f.charCodeAt(D)),n=o.from(u)}else if(e==="base64"){const l=atob(f),u=l.length,c=new Uint8Array(u);Array.from({length:u},(D,g)=>c[g]=l.charCodeAt(g)),n=o.from(c)}else e==="binary"?n=o.from(f):console.info("SafeBuffer.from unknown encoding: "+e);return n}if(f.byteLength,f.byteLength?f.byteLength:f.length){let e;return f instanceof ArrayBuffer&&(e=new Uint8Array(f)),o.from(e||f)}},alloc(f,n=0){return o.from(new Uint8Array(Array.from({length:f},()=>n)))},allocUnsafe(f){return o.from(new Uint8Array(Array.from({length:f})))},concat(f){if(!Array.isArray(f))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return o.from(f.reduce((n,w)=>n.concat(Array.from(w)),[]))}}),s.prototype.from=s.from,s.prototype.toString=o.prototype.toString,E.exports=s})(v,"./buffer"),v(function(E){const o=v("./root"),s={Buffer:v("./buffer")};var f={},n;if(JSON.parseAsync=JSON.parseAsync||function(e,l,u){var c;try{l(c,JSON.parse(e,u))}catch(D){l(D)}},JSON.stringifyAsync=JSON.stringifyAsync||function(e,l,u,c){var D;try{l(D,JSON.stringify(e,u,c))}catch(g){l(g)}},s.parse=function(e,l){return new Promise(function(u,c){JSON.parseAsync(e,function(D,g){D?c(D):u(g)},l)})},s.stringify=function(e,l,u){return new Promise(function(c,D){JSON.stringifyAsync(e,function(g,m){g?D(g):c(m)},l,u)})},o.window&&(s.crypto=window.crypto||window.msCrypto,s.subtle=(s.crypto||f).subtle||(s.crypto||f).webkitSubtle,s.TextEncoder=window.TextEncoder,s.TextDecoder=window.TextDecoder,s.random=e=>s.Buffer.from(s.crypto.getRandomValues(new Uint8Array(s.Buffer.alloc(e))))),!s.TextDecoder){const{TextEncoder:e,TextDecoder:l}=v((n+""==typeof k?".":"")+"./lib/text-encoding",1);s.TextDecoder=l,s.TextEncoder=e}if(!s.crypto)try{var w=v("crypto",1);Object.assign(s,{crypto:w,random:l=>s.Buffer.from(w.randomBytes(l))});const{Crypto:e}=v("@peculiar/webcrypto",1);s.ossl=s.subtle=new e({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}E.exports=s})(v,"./shim"),v(function(E){var o=v("./root"),s=v("./shim"),f={};f.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},f.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},f.ecdh={name:"ECDH",namedCurve:"P-256"},f.jwk=function(n,w){n=n.split(".");var e=n[0],l=n[1],u={kty:"EC",crv:"P-256",x:e,y:l,ext:!0};return u.key_ops=w?["sign"]:["verify"],w&&(u.d=w),u},f.keyToJwk=function(n){const e=n.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return{kty:"oct",k:e,ext:!1,alg:"A256GCM"}},f.recall={validity:12*60*60,hook:function(n){return n}},f.check=function(n){return typeof n=="string"&&n.slice(0,4)==="SEA{"},f.parse=async function(w){try{var e=typeof w=="string";return e&&w.slice(0,4)==="SEA{"&&(w=w.slice(3)),e?await s.parse(w):w}catch{}return w},o.opt=f,E.exports=f})(v,"./settings"),v(function(E){var o=v("./shim");E.exports=async function(s,f){var n=typeof s=="string"?s:await o.stringify(s),w=await o.subtle.digest({name:f||"SHA-256"},new o.TextEncoder().encode(n));return o.Buffer.from(w)}})(v,"./sha256"),v(function(E){const o=v("./shim"),s=o.subtle,f=o.ossl?o.ossl:s,n=w=>f.digest({name:"SHA-1"},new ArrayBuffer(w));E.exports=n})(v,"./sha1"),v(function(E){var o=v("./root"),s=v("./shim"),f=v("./settings"),n=v("./sha256"),w;o.work=o.work||(async(e,l,u,c)=>{try{var D=(l||{}).epub||l;if(c=c||{},D instanceof Function&&(u=D,D=w),e=typeof e=="string"?e:await s.stringify(e),(c.name||"").toLowerCase().slice(0,3)==="sha"){var g=s.Buffer.from(await n(e,c.name),"binary").toString(c.encode||"base64");if(u)try{u(g)}catch(a){console.log(a)}return g}D=D||s.random(9);var m=await(s.ossl||s.subtle).importKey("raw",new s.TextEncoder().encode(e),{name:c.name||"PBKDF2"},!1,["deriveBits"]),h=await(s.ossl||s.subtle).deriveBits({name:c.name||"PBKDF2",iterations:c.iterations||f.pbkdf2.iter,salt:new s.TextEncoder().encode(c.salt||D),hash:c.hash||f.pbkdf2.hash},m,c.length||f.pbkdf2.ks*8);e=s.random(e.length);var x=s.Buffer.from(h,"binary").toString(c.encode||"base64");if(u)try{u(x)}catch(a){console.log(a)}return x}catch(a){if(console.log(a),o.err=a,o.throw)throw a;u&&u();return}}),E.exports=o.work})(v,"./work"),v(function(E){var o=v("./root"),s=v("./shim");v("./settings"),o.name=o.name||(async(f,n)=>{try{if(f)try{f()}catch(w){console.log(w)}return}catch(w){if(console.log(w),o.err=w,o.throw)throw w;f&&f();return}}),o.pair=o.pair||(async(f,n)=>{try{var w=s.ossl||s.subtle,e=await s.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async c=>{var D={};D.priv=(await s.subtle.exportKey("jwk",c.privateKey)).d;var g=await s.subtle.exportKey("jwk",c.publicKey);return D.pub=g.x+"."+g.y,D});try{var l=await w.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async c=>{var D={};D.epriv=(await w.exportKey("jwk",c.privateKey)).d;var g=await w.exportKey("jwk",c.publicKey);return D.epub=g.x+"."+g.y,D})}catch(c){if(o.window)throw c;if(c=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw c}l=l||{};var u={pub:e.pub,priv:e.priv,epub:l.epub,epriv:l.epriv};if(f)try{f(u)}catch(c){console.log(c)}return u}catch(c){if(console.log(c),o.err=c,o.throw)throw c;f&&f();return}}),E.exports=o.pair})(v,"./pair"),v(function(E){var o=v("./root"),s=v("./shim"),f=v("./settings"),n=v("./sha256"),w;o.sign=o.sign||(async(e,l,u,c)=>{try{if(c=c||{},!(l||c).priv){if(!o.I)throw"No signing key.";l=await o.I(null,{what:e,how:"sign",why:c.why})}if(w===e)throw"`undefined` not allowed.";var D=await f.parse(e),g=c.check=c.check||D;if(o.verify&&(o.opt.check(g)||g&&g.s&&g.m)&&w!==await o.verify(g,l)){var d=await f.parse(g);if(c.raw||(d="SEA"+await s.stringify(d)),u)try{u(d)}catch(_){console.log(_)}return d}var m=l.pub,h=l.priv,x=f.jwk(m,h),a=await n(D),r=await(s.ossl||s.subtle).importKey("jwk",x,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(p=>(s.ossl||s.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},p,new Uint8Array(a))),d={m:D,s:s.Buffer.from(r,"binary").toString(c.encode||"base64")};if(c.raw||(d="SEA"+await s.stringify(d)),u)try{u(d)}catch(p){console.log(p)}return d}catch(p){if(console.log(p),o.err=p,o.throw)throw p;u&&u();return}}),E.exports=o.sign})(v,"./sign"),v(function(E){var o=v("./root"),s=v("./shim"),f=v("./settings"),n=v("./sha256"),w;o.verify=o.verify||(async(u,c,D,g)=>{try{var m=await f.parse(u);if(c===!1){var h=await f.parse(m.m);if(D)try{D(h)}catch(C){console.log(C)}return h}g=g||{};var x=c.pub||c,a=o.opt.slow_leak?await o.opt.slow_leak(x):await(s.ossl||s.subtle).importKey("jwk",f.jwk(x),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),r=await n(m.m),d,p,_,T;try{if(d=s.Buffer.from(m.s,g.encode||"base64"),p=new Uint8Array(d),_=await(s.ossl||s.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},a,p,new Uint8Array(r)),!_)throw"Signature did not match."}catch{if(o.opt.fallback)return await o.opt.fall_verify(u,c,D,g)}var b=_?await f.parse(m.m):w;if(D)try{D(b)}catch(C){console.log(C)}return b}catch(C){if(console.log(C),o.err=C,o.throw)throw C;D&&D();return}}),E.exports=o.verify;var e={};o.opt.slow_leak=u=>{if(e[u])return e[u];var c=f.jwk(u);return e[u]=(s.ossl||s.subtle).importKey("jwk",c,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),e[u]};var l=o.opt;o.opt.fall_verify=async function(u,c,D,g,m){if(m===o.opt.fallback)throw"Signature did not match";m=m||1;var h=u||"";u=o.opt.unpack(u)||u;var x=await f.parse(u),a=c.pub||c,r=await o.opt.slow_leak(a),d=m<=o.opt.fallback?s.Buffer.from(await s.subtle.digest({name:"SHA-256"},new s.TextEncoder().encode(await f.parse(x.m)))):await n(x.m),p,_,T;try{if(p=s.Buffer.from(x.s,g.encode||"base64"),_=new Uint8Array(p),T=await(s.ossl||s.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},r,_,new Uint8Array(d)),!T)throw"Signature did not match."}catch{try{p=s.Buffer.from(x.s,"utf8"),_=new Uint8Array(p),T=await(s.ossl||s.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},r,_,new Uint8Array(d))}catch{if(!T)throw"Signature did not match."}}var b=T?await f.parse(x.m):w;if(l.fall_soul=h["#"],l.fall_key=h["."],l.fall_val=u,l.fall_state=h[">"],D)try{D(b)}catch(C){console.log(C)}return b},o.opt.fallback=2})(v,"./verify"),v(function(E){var o=v("./shim"),s=v("./settings"),f=v("./sha256");const n=async(w,e,l)=>{const u=w+(e||o.random(8)).toString("utf8"),c=o.Buffer.from(await f(u),"binary"),D=s.keyToJwk(c);return await o.subtle.importKey("jwk",D,{name:"AES-GCM"},!1,["encrypt","decrypt"])};E.exports=n})(v,"./aeskey"),v(function(E){var o=v("./root"),s=v("./shim");v("./settings");var f=v("./aeskey"),n;o.encrypt=o.encrypt||(async(w,e,l,u)=>{try{u=u||{};var c=(e||u).epriv||e;if(n===w)throw"`undefined` not allowed.";if(!c){if(!o.I)throw"No encryption key.";e=await o.I(null,{what:w,how:"encrypt",why:u.why}),c=e.epriv||e}var D=typeof w=="string"?w:await s.stringify(w),g={s:s.random(9),iv:s.random(15)},m=await f(c,g.s,u).then(x=>s.subtle.encrypt({name:u.name||"AES-GCM",iv:new Uint8Array(g.iv)},x,new s.TextEncoder().encode(D))),h={ct:s.Buffer.from(m,"binary").toString(u.encode||"base64"),iv:g.iv.toString(u.encode||"base64"),s:g.s.toString(u.encode||"base64")};if(u.raw||(h="SEA"+await s.stringify(h)),l)try{l(h)}catch(x){console.log(x)}return h}catch(x){if(console.log(x),o.err=x,o.throw)throw x;l&&l();return}}),E.exports=o.encrypt})(v,"./encrypt"),v(function(E){var o=v("./root"),s=v("./shim"),f=v("./settings"),n=v("./aeskey");o.decrypt=o.decrypt||(async(w,e,l,u)=>{try{u=u||{};var c=(e||u).epriv||e;if(!c){if(!o.I)throw"No decryption key.";e=await o.I(null,{what:w,how:"decrypt",why:u.why}),c=e.epriv||e}var D=await f.parse(w),g,m,h;try{g=s.Buffer.from(D.s,u.encode||"base64"),m=s.Buffer.from(D.iv,u.encode||"base64"),h=s.Buffer.from(D.ct,u.encode||"base64");var x=await n(c,g,u).then(r=>s.subtle.decrypt({name:u.name||"AES-GCM",iv:new Uint8Array(m),tagLength:128},r,new Uint8Array(h)))}catch{if(u.encode==="utf8")throw"Could not decrypt";if(o.opt.fallback)return u.encode="utf8",await o.decrypt(w,e,l,u)}var a=await f.parse(new s.TextDecoder("utf8").decode(x));if(l)try{l(a)}catch(r){console.log(r)}return a}catch(r){if(console.log(r),o.err=r,o.throw)throw r;l&&l();return}}),E.exports=o.decrypt})(v,"./decrypt"),v(function(E){var o=v("./root"),s=v("./shim");v("./settings"),o.secret=o.secret||(async(n,w,e,l)=>{try{if(l=l||{},!w||!w.epriv||!w.epub){if(!o.I)throw"No secret mix.";w=await o.I(null,{what:n,how:"secret",why:l.why})}var u=n.epub||n,c=w.epub,D=w.epriv,g=s.ossl||s.subtle,m=f(u),h=Object.assign({public:await g.importKey(...m,!0,[])},{name:"ECDH",namedCurve:"P-256"}),x=f(c,D),a=await g.importKey(...x,!1,["deriveBits"]).then(async d=>{var p=await g.deriveBits(h,d,256),_=new Uint8Array(p),T=await g.importKey("raw",_,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return g.exportKey("jwk",T).then(({k:b})=>b)}),r=a;if(e)try{e(r)}catch(d){console.log(d)}return r}catch(d){if(console.log(d),o.err=d,o.throw)throw d;e&&e();return}});var f=(n,w)=>{var[e,l]=n.split("."),u=w?{d:w}:{};return["jwk",Object.assign(u,{x:e,y:l,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};E.exports=o.secret})(v,"./secret"),v(function(E){var o=v("./root");o.certify=o.certify||(async(s,f={},n,w,e={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),s=(()=>{var r=[];if(s){if((typeof s=="string"||Array.isArray(s))&&s.indexOf("*")>-1)return"*";if(typeof s=="string")return s;if(Array.isArray(s)){if(s.length===1&&s[0])return typeof s[0]=="object"&&s[0].pub?s[0].pub:typeof s[0]=="string"?s[0]:null;s.map(d=>{typeof d=="string"?r.push(d):typeof d=="object"&&d.pub&&r.push(d.pub)})}return typeof s=="object"&&s.pub?s.pub:r.length>0?r:null}})(),!s)return console.log("No certificant found.");const u=e.expiry&&(typeof e.expiry=="number"||typeof e.expiry=="string")?parseFloat(e.expiry):null,c=(f||{}).read?f.read:null,D=(f||{}).write?f.write:typeof f=="string"||Array.isArray(f)||f["+"]||f["#"]||f["."]||f["="]||f["*"]||f[">"]||f["<"]?f:null,g=(e||{}).block||(e||{}).blacklist||(e||{}).ban||{},m=g.read&&(typeof g.read=="string"||(g.read||{})["#"])?g.read:null,h=typeof g=="string"?g:g.write&&(typeof g.write=="string"||g.write["#"])?g.write:null;if(!c&&!D)return console.log("No policy found.");const x=JSON.stringify({c:s,...u?{e:u}:{},...c?{r:c}:{},...D?{w:D}:{},...m?{rb:m}:{},...h?{wb:h}:{}});var l=await o.sign(x,n,null,{raw:1});if(e.raw||(l="SEA"+JSON.stringify(l)),w)try{w(l)}catch(r){console.log(r)}return l}catch(u){if(o.err=u,o.throw)throw u;w&&w();return}}),E.exports=o.certify})(v,"./certify"),v(function(E){var o=v("./shim"),s=v("./root");s.work=v("./work"),s.sign=v("./sign"),s.verify=v("./verify"),s.encrypt=v("./encrypt"),s.decrypt=v("./decrypt"),s.certify=v("./certify"),s.random=s.random||o.random,s.Buffer=s.Buffer||v("./buffer"),s.keyid=s.keyid||(async f=>{try{const n=o.Buffer.concat(f.replace(/-/g,"+").replace(/_/g,"/").split(".").map(u=>o.Buffer.from(u,"base64"))),w=o.Buffer.concat([o.Buffer.from([153,n.length/256,n.length%256]),n]),e=await sha1hash(w),l=o.Buffer.from(e,"binary");return l.toString("hex",l.length-8)}catch(n){throw console.log(n),n}}),((s.window||{}).GUN||{}).SEA=s,E.exports=s})(v,"./sea"),v(function(E){var o=v("./sea"),s,f;o.window?s=o.window.GUN||{chain:{}}:s=v((f+""==typeof k?".":"")+"./gun",1),o.GUN=s;function n(e){this._={$:this}}n.prototype=function(){function e(){}return e.prototype=s.chain,new e}(),n.prototype.constructor=n,s.chain.user=function(e){var l=this,c=l.back(-1),u;if(e)return e=o.opt.pub((e._||"")["#"])||e,c.get("~"+e);if(u=c.back("user"))return u;var c=c._,D=c,g=D.opt.uuid||w;return(D=(u=D.user=l.chain(new n))._).opt={},D.opt.uuid=function(m){var h=g(),x=c.user;return!x||!(x=x.is)||!(x=x.pub)||(h="~"+x+"/"+h,m&&m.call&&m(null,h)),h},u};function w(){return s.state().toString(36).replace(".","")}s.User=n,n.GUN=s,n.SEA=s.SEA=o,E.exports=n})(v,"./user"),v(function(E){var o,s=""+o!=typeof window?window.Gun||{chain:{}}:v((""+o==typeof k?".":"")+"./gun",1);s.chain.then=function(f,n){var w=this,e=new Promise(function(l,u){w.once(l,n)});return f?e.then(f):e}})(v,"./then"),v(function(E){var o=v("./user"),s=o.SEA,f=o.GUN,n=function(){};o.prototype.create=function(...w){var e=typeof w[0]=="object"&&(w[0].pub||w[0].epub)?w[0]:typeof w[1]=="object"&&(w[1].pub||w[1].epub)?w[1]:null,l=e&&(e.pub||e.epub)?e.pub:typeof w[0]=="string"?w[0]:null,u=e&&(e.pub||e.epub)?e:l&&typeof w[1]=="string"?w[1]:null,c=w.filter(r=>typeof r=="function")[0]||null,D=w&&w.length>1&&typeof w[w.length-1]=="object"?w[w.length-1]:{},g=this,m=g._,h=g.back(-1);if(c=c||n,D=D||{},D.check!==!1){var x;if(l||(x="No user."),(u||"").length<8&&(x="Password too short!"),x)return c({err:f.log(x)}),g}if(m.ing)return(c||n)({err:f.log("User is already being created or authenticated!"),wait:!0}),g;m.ing=!0;var a={};return a.a=function(r){if(a.pubs=r,r&&!D.already){var d={err:f.log("User already created!")};m.ing=!1,(c||n)(d),g.leave();return}a.salt=String.random(64),s.work(u,a.salt,a.b)},a.b=function(r){a.proof=r,e?a.c(e):s.pair(a.c)},a.c=function(r){var d;a.pair=r||{},(d=m.root.user)&&(d._.sea=r,d.is={pub:r.pub,epub:r.epub,alias:l}),a.data={pub:r.pub},a.d()},a.d=function(){a.data.alias=l,a.e()},a.e=function(){a.data.epub=a.pair.epub,s.encrypt({priv:a.pair.priv,epriv:a.pair.epriv},a.proof,a.f,{raw:1})},a.f=function(r){a.data.auth=JSON.stringify({ek:r,s:a.salt}),a.g(a.data.auth)},a.g=function(r){var d;a.data.auth=a.data.auth||r,h.get(d="~"+a.pair.pub).put(a.data).on(a.h);var p={};p[d]={"#":d},h.get("~@"+l).put(p).get(d).on(a.i)},a.h=function(r,d,p,_){_.off(),a.h.ok=1,a.i()},a.i=function(r,d,p,_){_&&(a.i.ok=1,_.off()),!(!a.h.ok||!a.i.ok)&&(m.ing=!1,c({ok:0,pub:a.pair.pub}),n===c&&(e?g.auth(e):g.auth(l,u)))},h.get("~@"+l).once(a.a),g},o.prototype.leave=function(w,e){var l=this,u=l.back(-1)._.user;if(u&&(delete u.is,delete u._.is,delete u._.sea),s.window)try{var c={};c=window.sessionStorage,delete c.recall,delete c.pair}catch{}return l}})(v,"./create"),v(function(E){var o=v("./user"),s=o.SEA,f=o.GUN,n=function(){};o.prototype.auth=function(...e){var l=typeof e[0]=="object"&&(e[0].pub||e[0].epub)?e[0]:typeof e[1]=="object"&&(e[1].pub||e[1].epub)?e[1]:null,u=!l&&typeof e[0]=="string"?e[0]:null,c=(u||l&&!(l.priv&&l.epriv))&&typeof e[1]=="string"?e[1]:null,D=e.filter(p=>typeof p=="function")[0]||null,g=e&&e.length>1&&typeof e[e.length-1]=="object"?e[e.length-1]:{},m=this,h=m._,x=m.back(-1);if(h.ing)return(D||n)({err:f.log("User is already being created or authenticated!"),wait:!0}),m;h.ing=!0;var a={},r,d=9;return a.a=function(p){if(!p)return a.b();if(!p.pub){var _=[];return Object.keys(p).forEach(function(T){T!="_"&&_.push(p[T])}),a.b(_)}if(a.name)return a.f(p);a.c((a.data=p).auth)},a.b=function(p){var _=(a.list=(a.list||[]).concat(p||[])).shift();if(r===_){if(a.name)return a.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer.");if(u&&d--){x.get("~@"+u).once(a.a);return}return a.err("Wrong user or password.")}x.get(_).once(a.a)},a.c=function(p){if(r===p)return a.b();if(typeof p=="string")return a.c(w(p));s.work(c,(a.auth=p).s,a.d,a.enc)},a.d=function(p){s.decrypt(a.auth.ek,p,a.e,a.enc)},a.e=function(p){if(r===p)return a.enc?(a.enc=null,a.b()):(a.enc={encode:"utf8"},a.c(a.auth));a.half=p,a.f(a.data)},a.f=function(p){var _=a.half||{},T=a.data||{};a.g(a.lol={pub:p.pub||T.pub,epub:p.epub||T.epub,priv:p.priv||_.priv,epriv:p.epriv||_.epriv})},a.g=function(p){if(!p||!p.pub||!p.epub)return a.b();a.pair=p;var _=x._.user,T=_._;T.tag;var b=T.opt;T=_._=x.get("~"+p.pub)._,T.opt=b,_.is={pub:p.pub,epub:p.epub,alias:u||p.pub},T.sea=a.pair,h.ing=!1;try{c&&r==(w(h.root.graph["~"+p.pub].auth)||"")[":"]&&(g.shuffle=g.change=c)}catch{}if(g.change?a.z():(D||n)(T),s.window&&(m.back("user")._.opt||g).remember)try{var C={};C=window.sessionStorage,C.recall=!0,C.pair=JSON.stringify(p)}catch{}try{x._.tag.auth?x._.on("auth",T):setTimeout(function(){x._.on("auth",T)},1)}catch(N){f.log("Your 'auth' callback crashed with:",N)}},a.h=function(p){if(!p)return a.b();if(u=p.alias,u||(u=p.alias="~"+l.pub),!p.auth)return a.g(l);l=null,a.c((a.data=p).auth)},a.z=function(){a.salt=String.random(64),s.work(g.change,a.salt,a.y)},a.y=function(p){s.encrypt({priv:a.pair.priv,epriv:a.pair.epriv},p,a.x,{raw:1})},a.x=function(p){a.w(JSON.stringify({ek:p,s:a.salt}))},a.w=function(p){if(g.shuffle){console.log("migrate core account from UTF8 & shuffle");var _={};Object.keys(a.data).forEach(function(T){_[T]=a.data[T]}),delete _._,_.auth=p,x.get("~"+a.pair.pub).put(_)}x.get("~"+a.pair.pub).get("auth").put(p,D||n)},a.err=function(p){var _={err:f.log(p||"User cannot be found!")};h.ing=!1,(D||n)(_)},a.plugin=function(p){if(!(a.name=p))return a.err();var _=[p];p[0]!=="~"&&(_[1]="~"+p,_[2]="~@"+p),a.b(_)},l?l.priv&&l.epriv?a.g(l):x.get("~"+l.pub).once(a.h):u?x.get("~@"+u).once(a.a):!u&&!c&&s.name(a.plugin),m};function w(e){if(typeof e!="string")return e;try{e=JSON.parse(e)}catch{e={}}return e}})(v,"./auth"),v(function(E){var o=v("./user"),s=o.SEA;o.GUN,o.prototype.recall=function(f,n){var w=this,e=w.back(-1);if(f=f||{},f&&f.sessionStorage){if(s.window)try{var l={};l=window.sessionStorage,l&&(e._.opt.remember=!0,(w.back("user")._.opt||f).remember=!0,(l.recall||l.pair)&&e.user().auth(JSON.parse(l.pair),n))}catch{}return w}return w}})(v,"./recall"),v(function(E){var o=v("./user"),s=o.SEA,f=o.GUN,n=function(){};o.prototype.pair=function(){var w=this,e;try{e=new Proxy({DANGER:"\u2620"},{get:function(l,u,c){if(!(!w.is||!(w._||"").sea))return w._.sea[u]}})}catch{}return e},o.prototype.delete=async function(w,e,l){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var u=this;u.back(-1);var c=u.back("user");try{c.auth(w,e,function(D){var g=(c.is||{}).pub;c.map().once(function(){this.put(null)}),c.leave(),(l||n)({ok:0})})}catch(D){f.log("User.delete failed! Error:",D)}return u},o.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const w=this.back(-1);try{return await authRecall(w),w._.user._}catch{const l="No session!";throw f.log(l),{err:l}}},o.prototype.trust=async function(w){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),f.is(w)&&w.get("pub").get((e,l)=>{console.log(e,l)}),w.get("trust").get(path).put(theirPubkey)},o.prototype.grant=function(w,e){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var l=this,u=l.back(-1).user(),c=u._.sea,D="";return l.back(function(g){g.is||(D+=g.get||"")}),async function(){var g,m=await u.get("grant").get(c.pub).get(D).then();m=await s.decrypt(m,c),m||(m=s.random(16).toString(),g=await s.encrypt(m,c),u.get("grant").get(c.pub).get(D).put(g));var h=w.get("pub").then(),x=w.get("epub").then();h=await h,x=await x;var a=await s.secret(x,c);g=await s.encrypt(m,a),u.get("grant").get(h).get(D).put(g,e)}(),l},o.prototype.secret=function(w,e){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var l=this,u=l.back(-1).user(),c=u.pair(),D="";return l.back(function(g){g.is||(D+=g.get||"")}),async function(){var g,m=await u.get("trust").get(c.pub).get(D).then();m=await s.decrypt(m,c),m||(m=s.random(16).toString(),g=await s.encrypt(m,c),u.get("trust").get(c.pub).get(D).put(g)),g=await s.encrypt(w,m),l.put(g,e)}(),l},E.exports=o})(v,"./share"),v(function(E){var o=v("./sea"),s=v("./settings"),f=function(){},n,w=""+n!=typeof window?window.Gun||{on:f}:v((""+n==typeof k?".":"")+"./gun",1);w.on("opt",function(m){m.sea||(m.sea={own:{}},m.on("put",e,m)),this.to.next(m)});function e(m){var h=this,x=h.as,a=m.put,r=a["#"],d=a["."],p=a[":"],_=a[">"],T=m["#"],b;if(!(!r||!d)){if((m._||"").faith&&(x.opt||"").faith&&typeof m._=="function"){o.opt.pack(a,function(N){o.verify(N,!1,function(U){a["="]=o.opt.unpack(U),h.to.next(m)})});return}var C=function(N){x.on("in",{"@":T,err:m.err=N})};if((m._||"").DBG&&((m._||"").DBG.c=+new Date),0<=r.indexOf("<?")&&(b=parseFloat(r.split("<?")[1]||""),b&&_<w.state()-b*1e3)){(b=m._)&&b.stun&&b.stun--;return}if(r==="~@"){e.alias(h,m,p,d,r,x,C);return}if(r.slice(0,2)==="~@"){e.pubs(h,m,p,d,r,x,C);return}if(b=o.opt.pub(r)){e.pub(h,m,p,d,r,x,C,x.user||"",b);return}if(0<=r.indexOf("#")){e.hash(h,m,p,d,r,x,C);return}e.any(h,m,p,d,r,x,C,x.user||"")}}e.hash=function(m,h,x,a,r,d,p){o.work(x,null,function(_){function T(b){let C="";for(let N=0;N<b.length;N++)C+=N-1&1?"":String.fromCharCode(parseInt(b.substring(N-1,N+1),16));return btoa(C)}if(_&&_===a.split("#").slice(-1)[0])return m.to.next(h);if(_&&_===T(a.split("#").slice(-1)[0]))return m.to.next(h);p("Data hash not same as hash!")},{name:"SHA-256"})},e.alias=function(m,h,x,a,r,d,p){if(!x)return p("Data must exist!");if("~@"+a===u(x))return m.to.next(h);p("Alias not same!")},e.pubs=function(m,h,x,a,r,d,p){if(!x)return p("Alias must exist!");if(a===u(x))return m.to.next(h);p("Alias not same!")},e.pub=async function(m,h,x,a,r,d,p,_,T){var b;const C=await s.parse(x)||{},N=(U,A,y)=>{if(U.m&&U.s&&A&&T)return o.verify(U,T,j=>{if(n!==j&&n!==j.e&&h.put[">"]&&h.put[">"]>parseFloat(j.e))return p("Certificate expired.");if(n!==j&&j.c&&j.w&&(j.c===A||j.c.indexOf("*")>-1)){let M=r.indexOf("/")>-1?r.replace(r.substring(0,r.indexOf("/")+1),""):"";String.match=String.match||w.text.match;const R=Array.isArray(j.w)?j.w:typeof j.w=="object"||typeof j.w=="string"?[j.w]:[];for(const B of R)if(String.match(M,B["#"])&&String.match(a,B["."])||!B["."]&&String.match(M,B["#"])||!B["#"]&&String.match(a,B["."])||String.match(M?M+"/"+a:a,B["#"]||B)){if(B["+"]&&B["+"].indexOf("*")>-1&&M&&M.indexOf(A)==-1&&a.indexOf(A)==-1)return p(`Path "${M}" or key "${a}" must contain string "${A}".`);if(j.wb&&(typeof j.wb=="string"||(j.wb||{})["#"])){var $=m.as.root.$.back(-1);return typeof j.wb=="string"&&j.wb.slice(0,1)!=="~"&&($=$.get("~"+T)),$.get(j.wb).get(A).once(P=>P&&(P===1||P===!0)?p(`Certificant ${A} blocked.`):y(j))}return y(j)}return p("Certificate verification fail.")}})};if(a==="pub"&&"~"+T===r)return x===T?m.to.next(h):p("Account not same!");if((b=_.is)&&b.pub&&!C["*"]&&!C["+"]&&(T===b.pub||T!==b.pub&&((h._.msg||{}).opt||{}).cert)){o.opt.pack(h.put,U=>{o.sign(U,_._.sea,async function(A){if(n===A)return p(o.err||"Signature fail.");if(h.put[":"]={":":b=o.opt.unpack(A.m),"~":A.s},h.put["="]=b,T===_.is.pub){(b=u(x))&&((d.sea.own[b]=d.sea.own[b]||{})[T]=1),JSON.stringifyAsync(h.put[":"],function(y,j){return y?p(y||"Stringify error."):(h.put[":"]=j,m.to.next(h))});return}if(T!==_.is.pub&&((h._.msg||{}).opt||{}).cert){const y=await s.parse(h._.msg.opt.cert);y&&y.m&&y.s&&N(y,_.is.pub,j=>{h.put[":"]["+"]=y,h.put[":"]["*"]=_.is.pub,JSON.stringifyAsync(h.put[":"],function($,M){return $?p($||"Stringify error."):(h.put[":"]=M,m.to.next(h))})})}},{raw:1})});return}o.opt.pack(h.put,U=>{o.verify(U,C["*"]||T,function(A){var y;if(A=o.opt.unpack(A),n===A)return p("Unverified data.");if((y=u(A))&&T===o.opt.pub(y)&&((d.sea.own[y]=d.sea.own[y]||{})[T]=1),C["+"]&&C["+"].m&&C["+"].s&&C["*"])N(C["+"],C["*"],j=>(h.put["="]=A,m.to.next(h)));else return h.put["="]=A,m.to.next(h)})})},e.any=function(m,h,x,a,r,d,p,_){if(d.opt.secure)return p("Soul missing public key at '"+a+"'.");d.on("secure",function(T){if(this.off(),!d.opt.secure)return m.to.next(T);p("Data cannot be changed.")}).on.on("secure",h)};var l=w.valid,u=function(m,h){return typeof(h=l(m))=="string"&&h};(w.state||"").ify;var c=/[^\w_-]/;o.opt.pub=function(m){if(!!m&&(m=m.split("~"),!(!m||!(m=m[1]))&&(m=m.split(c).slice(0,2),!(!m||m.length!=2)&&(m[0]||"")[0]!=="@")))return m=m.slice(0,2).join("."),m},o.opt.stringy=function(m){},o.opt.pack=function(m,h,x,a,r){var d,p;if(o.opt.check(m))return h(m);m&&m["#"]&&m["."]&&m[">"]&&(d=m[":"],p=1),JSON.parseAsync(p?d:m,function(_,T){var b=n!==(T||"")[":"]&&(T||"")["~"];if(!b){h(m);return}h({m:{"#":r||m["#"],".":x||m["."],":":(T||"")[":"],">":m[">"]||w.state.is(a,x)},s:b})})};var D=o.opt;o.opt.unpack=function(m,h,x){var a;if(n!==m){if(m&&n!==(a=m[":"]))return a;if(h=h||D.fall_key,!x&&D.fall_val&&(x={},x[h]=D.fall_val),!(!h||!x)){if(m===x[h]||!o.opt.check(x[h]))return m;var r=x&&x._&&x._["#"]||D.fall_soul,d=w.state.is(x,h)||D.fall_state;if(m&&m.length===4&&r===m[0]&&h===m[1]&&g(d)===g(m[3]))return m[2];if(d<o.opt.shuffle_attack)return m}}},o.opt.shuffle_attack=15463296e5;var g=Math.floor})(v,"./index")})()})(St);window.Buffer=Xe.Buffer;window.setImmediate=setTimeout;let Oe;function Dt(F={localStorage:!1}){return Oe||(Oe=ce({peers:[Ce.value],...F})),Oe}var qe;(qe=ce==null?void 0:ce.node)==null||qe.soul;var Ye;(Ye=ce==null?void 0:ce.text)==null||Ye.random;Me({});Me({});export{jt as _,Et as a,_t as b,Dt as u};
